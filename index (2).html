<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√•dl√∏s Kommunikasjon - VG1 Naturfag</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
const { useState, useEffect, useRef } = React;



// ===== HOVEDAPP MED INDEKS =====
function TradlosKommunikasjonApp() {
  const [currentModule, setCurrentModule] = useState(null);
  const [studentName, setStudentName] = useState('');
  const [showNameInput, setShowNameInput] = useState(true);
  const [moduleProgress, setModuleProgress] = useState({});
  const [homeworkAnswers, setHomeworkAnswers] = useState({});

  const modules = [
    { 
      id: 'okt1', 
      number: 1,
      title: 'B√∏lger og EM-str√•ling', 
      subtitle: 'Grunnlaget for tr√•dl√∏s kommunikasjon',
      icon: 'üåä',
      color: '#0ea5e9',
      available: true,
      topics: ['Hva er b√∏lger?', 'B√∏lgeegenskaper', 'EM-spekteret', 'Gjennomtrenging', 'Bruksomr√•der', 'Str√•ling og helse']
    },
    { 
      id: 'okt2', 
      number: 2,
      title: 'Kommunikasjonssystem', 
      subtitle: 'Sender, mottaker og signaler',
      icon: 'üì°',
      color: '#f59e0b',
      available: false,
      topics: ['Sender og mottaker', 'Modulasjon', 'Digital vs analog', 'Signalkoding']
    },
    { 
      id: 'okt3', 
      number: 3,
      title: 'Nettverk og adresser', 
      subtitle: 'Rutere, IP-adresser, internett',
      icon: 'üåê',
      color: '#8b5cf6',
      available: false,
      topics: ['Rutere', 'IP-adresser', 'DNS', 'Basestasjoner', 'Dekning']
    },
    { 
      id: 'okt4', 
      number: 4,
      title: 'Anvendelser', 
      subtitle: 'Praktisk bruk og sammenheng',
      icon: 'üí°',
      color: '#10b981',
      available: false,
      topics: ['WiFi, 4G, 5G', 'Bluetooth, NFC', 'Bin√¶r kode', 'Samfunnsbruk']
    }
  ];

  // Startskjerm med navn
  if (showNameInput) {
    return (
      <div style={{
        minHeight: '100vh',
        background: 'linear-gradient(135deg, #0c1929 0%, #1e1b4b 50%, #1e3a5f 100%)',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        fontFamily: "'Segoe UI', system-ui, sans-serif",
        padding: '20px'
      }}>
        <div style={{
          background: 'rgba(255,255,255,0.08)',
          backdropFilter: 'blur(20px)',
          borderRadius: '24px',
          padding: '48px',
          maxWidth: '520px',
          textAlign: 'center',
          border: '1px solid rgba(255,255,255,0.15)'
        }}>
          <div style={{ fontSize: '72px', marginBottom: '16px' }}>üì°</div>
          <h1 style={{ color: 'white', fontSize: '32px', marginBottom: '8px', fontWeight: '700' }}>
            Tr√•dl√∏s Kommunikasjon
          </h1>
          <p style={{ color: 'rgba(255,255,255,0.7)', fontSize: '18px', marginBottom: '8px' }}>
            VG1 Naturfag
          </p>
          <p style={{ color: 'rgba(255,255,255,0.5)', fontSize: '14px', marginBottom: '32px' }}>
            4 dobbelttimer ‚Ä¢ Interaktivt undervisningsopplegg
          </p>
          <input
            type="text"
            placeholder="Skriv inn navnet ditt..."
            value={studentName}
            onChange={(e) => setStudentName(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && studentName && setShowNameInput(false)}
            style={{
              width: '100%',
              padding: '16px 24px',
              fontSize: '18px',
              borderRadius: '12px',
              border: '2px solid rgba(255,255,255,0.3)',
              background: 'rgba(255,255,255,0.1)',
              color: 'white',
              marginBottom: '16px',
              outline: 'none',
              boxSizing: 'border-box'
            }}
          />
          <button
            onClick={() => studentName && setShowNameInput(false)}
            disabled={!studentName}
            style={{
              width: '100%',
              padding: '16px 32px',
              fontSize: '18px',
              fontWeight: '600',
              borderRadius: '12px',
              border: 'none',
              background: studentName 
                ? 'linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)' 
                : 'rgba(255,255,255,0.1)',
              color: 'white',
              cursor: studentName ? 'pointer' : 'not-allowed'
            }}
          >
            Start l√¶ring ‚Üí
          </button>
        </div>
      </div>
    );
  }

  // Vis modul-innhold eller indeks
  if (currentModule === 'okt1') {
    return (
      <Okt1Content 
        studentName={studentName}
        onBack={() => setCurrentModule(null)}
        homeworkAnswers={homeworkAnswers}
        setHomeworkAnswers={setHomeworkAnswers}
        moduleProgress={moduleProgress}
        setModuleProgress={setModuleProgress}
      />
    );
  }

  // Indeks-visning
  return (
    <div style={{
      minHeight: '100vh',
      background: 'linear-gradient(135deg, #0f172a 0%, #1e293b 100%)',
      fontFamily: "'Segoe UI', system-ui, sans-serif",
      color: 'white'
    }}>
      {/* Header */}
      <header style={{
        background: 'rgba(0,0,0,0.4)',
        borderBottom: '1px solid rgba(255,255,255,0.1)',
        padding: '20px 24px'
      }}>
        <div style={{ maxWidth: '1000px', margin: '0 auto', display: 'flex', alignItems: 'center', gap: '16px' }}>
          <span style={{ fontSize: '36px' }}>üì°</span>
          <div>
            <h1 style={{ margin: 0, fontSize: '24px', fontWeight: '700' }}>Tr√•dl√∏s Kommunikasjon</h1>
            <p style={{ margin: '4px 0 0', fontSize: '14px', opacity: 0.7 }}>VG1 Naturfag ‚Ä¢ {studentName}</p>
          </div>
        </div>
      </header>

      {/* Modul-oversikt */}
      <main style={{ padding: '32px 24px', maxWidth: '1000px', margin: '0 auto' }}>
        <div style={{ marginBottom: '32px' }}>
          <h2 style={{ fontSize: '28px', marginBottom: '8px' }}>Velg √∏kt</h2>
          <p style={{ opacity: 0.7 }}>Klikk p√• en √∏kt for √• starte</p>
        </div>

        <div style={{ display: 'grid', gap: '20px' }}>
          {modules.map((module) => (
            <div
              key={module.id}
              onClick={() => module.available && setCurrentModule(module.id)}
              style={{
                background: module.available 
                  ? `linear-gradient(135deg, ${module.color}22, ${module.color}11)`
                  : 'rgba(255,255,255,0.03)',
                borderRadius: '16px',
                padding: '24px',
                border: module.available 
                  ? `2px solid ${module.color}44`
                  : '2px solid rgba(255,255,255,0.1)',
                cursor: module.available ? 'pointer' : 'not-allowed',
                opacity: module.available ? 1 : 0.5,
                transition: 'all 0.2s ease',
                display: 'grid',
                gridTemplateColumns: '80px 1fr auto',
                gap: '20px',
                alignItems: 'center'
              }}
            >
              {/* Icon */}
              <div style={{
                width: '70px',
                height: '70px',
                borderRadius: '16px',
                background: module.available ? module.color : 'rgba(255,255,255,0.1)',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontSize: '32px'
              }}>
                {module.icon}
              </div>

              {/* Info */}
              <div>
                <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '4px' }}>
                  <span style={{
                    background: module.available ? module.color : 'rgba(255,255,255,0.2)',
                    padding: '2px 10px',
                    borderRadius: '12px',
                    fontSize: '12px',
                    fontWeight: '600'
                  }}>
                    √òkt {module.number}
                  </span>
                  {!module.available && (
                    <span style={{ fontSize: '12px', opacity: 0.6 }}>üîí Kommer snart</span>
                  )}
                  {moduleProgress[module.id]?.completed && (
                    <span style={{ color: '#10b981', fontSize: '14px' }}>‚úì Fullf√∏rt</span>
                  )}
                </div>
                <h3 style={{ margin: '0 0 4px', fontSize: '20px', color: module.available ? module.color : 'inherit' }}>
                  {module.title}
                </h3>
                <p style={{ margin: '0 0 8px', opacity: 0.7, fontSize: '14px' }}>{module.subtitle}</p>
                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px' }}>
                  {module.topics.map((topic, i) => (
                    <span key={i} style={{
                      padding: '3px 8px',
                      background: 'rgba(255,255,255,0.1)',
                      borderRadius: '4px',
                      fontSize: '11px',
                      opacity: 0.8
                    }}>
                      {topic}
                    </span>
                  ))}
                </div>
              </div>

              {/* Arrow */}
              {module.available && (
                <div style={{ fontSize: '24px', opacity: 0.5 }}>‚Üí</div>
              )}
            </div>
          ))}
        </div>

        {/* Kompetansem√•l */}
        <div style={{
          marginTop: '40px',
          background: 'rgba(255,255,255,0.05)',
          borderRadius: '16px',
          padding: '24px'
        }}>
          <h3 style={{ marginBottom: '16px', opacity: 0.9 }}>üìã Kompetansem√•l (LK20)</h3>
          <div style={{ display: 'grid', gap: '12px' }}>
            {[
              'Utforske og beskrive noen sentrale b√∏lgefenomener',
              'Utforske og beskrive elektromagnetisk og ioniserende str√•ling, og vurdere informasjon om str√•ling og helseeffekter',
              'Forklare hovedprinsippene for tr√•dl√∏s kommunikasjon og gi eksempler p√• hva slik teknologi brukes til'
            ].map((km, i) => (
              <p key={i} style={{
                margin: 0,
                padding: '12px 16px',
                background: 'rgba(0,0,0,0.2)',
                borderRadius: '8px',
                fontSize: '14px',
                fontStyle: 'italic',
                lineHeight: '1.5'
              }}>
                "{km}"
              </p>
            ))}
          </div>
        </div>
      </main>
    </div>
  );
}


// ===== √òKT 1 INNHOLD =====
function Okt1Content({ studentName, onBack, homeworkAnswers, setHomeworkAnswers, moduleProgress, setModuleProgress }) {
  const [activeSection, setActiveSection] = useState('intro');
  const [predictions, setPredictions] = useState({});
  const [completedSections, setCompletedSections] = useState([]);

  const color = '#0ea5e9';

  const sections = [
    { id: 'intro', label: 'Introduksjon', icon: 'üìñ' },
    { id: 'waves', label: 'Hva er b√∏lger?', icon: 'üåä' },
    { id: 'properties', label: 'B√∏lgeegenskaper', icon: 'üìê' },
    { id: 'formula', label: 'B√∏lgeformelen', icon: 'üßÆ' },
    { id: 'em-spectrum', label: 'EM-spekteret', icon: 'üåà' },
    { id: 'penetration', label: 'Gjennom veggen?', icon: 'üß±' },
    { id: 'uses', label: 'Bruksomr√•der', icon: 'üì°' },
    { id: 'health', label: 'Str√•ling og helse', icon: '‚öïÔ∏è' },
    { id: 'practical', label: 'Praktisk fors√∏k', icon: 'üî¨' },
    { id: 'flashcards', label: 'Begreper', icon: 'üÉè' },
    { id: 'homework', label: 'Hjemmeoppgave', icon: 'üìù' }
  ];

  const markComplete = (sectionId) => {
    if (!completedSections.includes(sectionId)) {
      setCompletedSections([...completedSections, sectionId]);
    }
  };

  return (
    <div style={{
      minHeight: '100vh',
      background: 'linear-gradient(135deg, #0f172a 0%, #1e293b 100%)',
      fontFamily: "'Segoe UI', system-ui, sans-serif",
      color: 'white'
    }}>
      {/* Header */}
      <header style={{
        background: 'rgba(0,0,0,0.4)',
        borderBottom: '1px solid rgba(255,255,255,0.1)',
        padding: '12px 24px',
        position: 'sticky',
        top: 0,
        zIndex: 100,
        backdropFilter: 'blur(10px)'
      }}>
        <div style={{ 
          maxWidth: '1200px', 
          margin: '0 auto',
          display: 'flex',
          justifyContent: 'space-between',
          alignItems: 'center'
        }}>
          <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>
            <button
              onClick={onBack}
              style={{
                padding: '8px 12px',
                borderRadius: '8px',
                border: 'none',
                background: 'rgba(255,255,255,0.1)',
                color: 'white',
                cursor: 'pointer',
                fontSize: '14px'
              }}
            >
              ‚Üê Tilbake
            </button>
            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
              <span style={{ fontSize: '28px' }}>üåä</span>
              <div>
                <h1 style={{ margin: 0, fontSize: '18px', fontWeight: '700' }}>
                  √òkt 1: B√∏lger og EM-str√•ling
                </h1>
                <p style={{ margin: 0, fontSize: '12px', opacity: 0.7 }}>
                  Dobbelttime (90 min) ‚Ä¢ {studentName}
                </p>
              </div>
            </div>
          </div>
          <div style={{ fontSize: '14px', opacity: 0.7 }}>
            ‚úì {completedSections.length}/{sections.length - 1}
          </div>
        </div>
      </header>

      {/* Navigation */}
      <nav style={{
        background: 'rgba(0,0,0,0.2)',
        borderBottom: '1px solid rgba(255,255,255,0.05)',
        padding: '12px 24px',
        overflowX: 'auto'
      }}>
        <div style={{
          maxWidth: '1200px',
          margin: '0 auto',
          display: 'flex',
          gap: '6px'
        }}>
          {sections.map((s) => (
            <button
              key={s.id}
              onClick={() => setActiveSection(s.id)}
              style={{
                padding: '8px 14px',
                borderRadius: '20px',
                border: activeSection === s.id 
                  ? `2px solid ${color}` 
                  : '2px solid transparent',
                background: activeSection === s.id 
                  ? `${color}22` 
                  : completedSections.includes(s.id)
                    ? 'rgba(16,185,129,0.2)'
                    : 'rgba(255,255,255,0.05)',
                color: 'white',
                cursor: 'pointer',
                fontSize: '13px',
                whiteSpace: 'nowrap',
                display: 'flex',
                alignItems: 'center',
                gap: '6px'
              }}
            >
              {completedSections.includes(s.id) && s.id !== 'intro' ? '‚úì' : s.icon}
              {s.label}
            </button>
          ))}
        </div>
      </nav>

      {/* Main Content */}
      <main style={{ padding: '24px', maxWidth: '1000px', margin: '0 auto' }}>
        {activeSection === 'intro' && <IntroSection color={color} setActiveSection={setActiveSection} />}
        {activeSection === 'waves' && <WavesSection color={color} markComplete={() => markComplete('waves')} />}
        {activeSection === 'properties' && <PropertiesSection color={color} markComplete={() => markComplete('properties')} />}
        {activeSection === 'formula' && <FormulaSection color={color} markComplete={() => markComplete('formula')} />}
        {activeSection === 'em-spectrum' && <EMSpectrumSection color={color} markComplete={() => markComplete('em-spectrum')} />}
        {activeSection === 'penetration' && <PenetrationSection color={color} predictions={predictions} setPredictions={setPredictions} markComplete={() => markComplete('penetration')} />}
        {activeSection === 'uses' && <UsesSection color={color} markComplete={() => markComplete('uses')} />}
        {activeSection === 'health' && <HealthSection color={color} markComplete={() => markComplete('health')} />}
        {activeSection === 'practical' && <PracticalSection color={color} markComplete={() => markComplete('practical')} />}
        {activeSection === 'flashcards' && <FlashcardsSection color={color} markComplete={() => markComplete('flashcards')} />}
        {activeSection === 'homework' && <HomeworkSection color={color} answers={homeworkAnswers} setAnswers={setHomeworkAnswers} studentName={studentName} />}
      </main>
    </div>
  );
}


// ===== GJENBRUKBARE KOMPONENTER =====

function ContentCard({ children, color = 'rgba(255,255,255,0.05)' }) {
  return (
    <div style={{
      background: color,
      borderRadius: '16px',
      padding: '24px',
      marginBottom: '24px'
    }}>
      {children}
    </div>
  );
}

function DiscussionBox({ question, helpText, color }) {
  return (
    <div style={{
      background: `linear-gradient(135deg, ${color}22, ${color}11)`,
      border: `2px solid ${color}`,
      borderRadius: '12px',
      padding: '20px',
      marginBottom: '20px'
    }}>
      <div style={{ display: 'flex', alignItems: 'flex-start', gap: '12px' }}>
        <span style={{ fontSize: '24px' }}>üí¨</span>
        <div>
          <p style={{ fontWeight: '600', fontSize: '16px', marginBottom: '8px' }}>
            Diskuter med sidemannen:
          </p>
          <p style={{ fontSize: '16px', marginBottom: helpText ? '8px' : '0' }}>{question}</p>
          {helpText && (
            <p style={{ fontSize: '14px', opacity: 0.7, fontStyle: 'italic' }}>{helpText}</p>
          )}
        </div>
      </div>
    </div>
  );
}


// ===== INTRODUKSJON =====
function IntroSection({ color, setActiveSection }) {
  return (
    <>
      <ContentCard>
        <div style={{ textAlign: 'center', marginBottom: '24px' }}>
          <span style={{ fontSize: '64px' }}>üåä</span>
          <h2 style={{ color: color, fontSize: '28px', marginTop: '16px', marginBottom: '8px' }}>
            Velkommen til b√∏lgenes verden!
          </h2>
          <p style={{ fontSize: '18px', opacity: 0.8 }}>
            I dag skal vi utforske elektromagnetiske b√∏lger - grunnlaget for all tr√•dl√∏s kommunikasjon
          </p>
        </div>
        
        <div style={{
          background: 'rgba(0,0,0,0.3)',
          borderRadius: '12px',
          padding: '20px',
          marginBottom: '24px'
        }}>
          <h3 style={{ color: color, marginBottom: '12px' }}>üìã Kompetansem√•l (LK20)</h3>
          <p style={{ fontStyle: 'italic', lineHeight: '1.7', marginBottom: '12px' }}>
            "Utforske og beskrive noen sentrale b√∏lgefenomener"
          </p>
          <p style={{ fontStyle: 'italic', lineHeight: '1.7', marginBottom: '12px' }}>
            "Utforske og beskrive elektromagnetisk og ioniserende str√•ling"
          </p>
          <p style={{ fontStyle: 'italic', lineHeight: '1.7' }}>
            "Forklare hovedprinsippene for tr√•dl√∏s kommunikasjon og gi eksempler p√• hva slik teknologi brukes til"
          </p>
        </div>
      </ContentCard>

      <ContentCard>
        <h3 style={{ color: color, marginBottom: '16px' }}>üéØ L√¶ringsm√•l for denne √∏kten</h3>
        <div style={{ display: 'grid', gap: '10px' }}>
          {[
            'Forst√• hva en b√∏lge er og hvordan den overf√∏rer energi',
            'Kunne forklare b√∏lgelengde, frekvens og amplitude',
            'Bruke b√∏lgeformelen v = f √ó Œª',
            'Kjenne til det elektromagnetiske spekteret',
            'Vite hvilke b√∏lger som brukes til WiFi, 4G, Bluetooth osv.',
            'Forst√• hvorfor radiob√∏lger g√•r gjennom vegger, men infrar√∏d ikke gj√∏r det',
            'Skille mellom ioniserende og ikke-ioniserende str√•ling'
          ].map((goal, i) => (
            <div key={i} style={{
              display: 'flex',
              alignItems: 'flex-start',
              gap: '12px',
              padding: '12px',
              background: 'rgba(0,0,0,0.2)',
              borderRadius: '8px'
            }}>
              <span style={{
                background: color,
                color: 'white',
                minWidth: '28px',
                height: '28px',
                borderRadius: '50%',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontSize: '14px',
                fontWeight: '600'
              }}>{i + 1}</span>
              <span style={{ lineHeight: '1.5' }}>{goal}</span>
            </div>
          ))}
        </div>
      </ContentCard>

      <DiscussionBox
        color={color}
        question="Hvor mange usynlige b√∏lger tror du det er i dette rommet akkurat n√•? Hva sender dem?"
        helpText="Tenk p√• alle elektroniske enheter rundt deg..."
      />

      <div style={{ textAlign: 'center' }}>
        <button
          onClick={() => setActiveSection('waves')}
          style={{
            padding: '16px 32px',
            fontSize: '18px',
            fontWeight: '600',
            borderRadius: '12px',
            border: 'none',
            background: `linear-gradient(135deg, ${color} 0%, #0284c7 100%)`,
            color: 'white',
            cursor: 'pointer'
          }}
        >
          La oss begynne! ‚Üí
        </button>
      </div>
    </>
  );
}


// ===== HVA ER B√òLGER? =====
function WavesSection({ color, markComplete }) {
  useEffect(() => { markComplete(); }, []);

  return (
    <>
      <ContentCard>
        <h2 style={{ color: color, marginBottom: '16px' }}>üåä Hva er egentlig en b√∏lge?</h2>
        <p style={{ fontSize: '17px', lineHeight: '1.8', marginBottom: '20px' }}>
          Tenk p√• n√•r du kaster en stein i et stille vann. Ringene sprer seg utover, 
          men <strong>vannet selv flytter seg ikke</strong> med b√∏lgen - det bare beveger seg 
          opp og ned. Det som flytter seg er <strong>energi</strong>.
        </p>
        
        <div style={{
          background: 'rgba(0,0,0,0.3)',
          borderRadius: '12px',
          padding: '20px',
          marginBottom: '20px'
        }}>
          <h3 style={{ color: color, marginBottom: '12px' }}>üìå Definisjon</h3>
          <p style={{ fontSize: '18px', fontWeight: '500' }}>
            En <strong>b√∏lge</strong> er en forstyrrelse som transporterer <strong>energi</strong> fra 
            ett sted til et annet, uten at materie flyttes permanent.
          </p>
        </div>
      </ContentCard>

      {/* TVERRB√òLGER */}
      <ContentCard>
        <h3 style={{ color: '#0ea5e9', marginBottom: '16px' }}>‚ÜïÔ∏è Tverrb√∏lger</h3>
        <p style={{ fontSize: '16px', lineHeight: '1.8', marginBottom: '20px' }}>
          I en tverrb√∏lge svinger partiklene <strong>vinkelrett</strong> (90¬∞) p√• retningen 
          b√∏lgen beveger seg. Tenk p√• en b√∏lge p√• et tau - du rister tauet opp og ned, 
          men b√∏lgen beveger seg bortover langs tauet.
        </p>
        
        <WaveBasicAnimation color={color} />
        
        <div style={{ marginTop: '16px', display: 'grid', gap: '8px' }}>
          <p style={{ fontSize: '14px' }}><strong>Eksempler p√• tverrb√∏lger:</strong></p>
          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
            {['B√∏lger p√• vann', 'B√∏lger p√• tau/streng', 'Lysb√∏lger', 'Radiob√∏lger', 'Alle EM-b√∏lger'].map((ex, i) => (
              <span key={i} style={{ padding: '6px 12px', background: 'rgba(14,165,233,0.2)', borderRadius: '16px', fontSize: '13px' }}>{ex}</span>
            ))}
          </div>
        </div>
      </ContentCard>

      {/* LANGSG√ÖENDE B√òLGER */}
      <ContentCard>
        <h3 style={{ color: '#f59e0b', marginBottom: '16px' }}>‚ÜîÔ∏è Langsg√•ende b√∏lger (Lydb√∏lger)</h3>
        <p style={{ fontSize: '16px', lineHeight: '1.8', marginBottom: '20px' }}>
          I en langsg√•ende b√∏lge svinger partiklene <strong>parallelt</strong> med retningen 
          b√∏lgen beveger seg. Partiklene presses sammen (kompresjon) og trekkes fra 
          hverandre (fortynning) i en rytme.
        </p>
        
        <LongitudinalWaveAnimation />
        
        <div style={{
          background: 'rgba(245,158,11,0.1)',
          borderRadius: '12px',
          padding: '20px',
          marginTop: '20px',
          border: '2px solid rgba(245,158,11,0.3)'
        }}>
          <h4 style={{ color: '#f59e0b', marginBottom: '12px' }}>üîä Hvordan lyd dannes og h√∏res</h4>
          <div style={{ display: 'grid', gap: '12px' }}>
            <div style={{ display: 'flex', alignItems: 'flex-start', gap: '12px' }}>
              <span style={{ fontSize: '24px' }}>üîî</span>
              <div>
                <strong>1. Lydkilden vibrerer</strong>
                <p style={{ margin: '4px 0 0', fontSize: '14px', opacity: 0.9 }}>
                  En h√∏yttaler, stemmeband, gitarstreng eller bjelle vibrerer frem og tilbake
                </p>
              </div>
            </div>
            <div style={{ display: 'flex', alignItems: 'flex-start', gap: '12px' }}>
              <span style={{ fontSize: '24px' }}>üí®</span>
              <div>
                <strong>2. Luften presses sammen og trekkes fra hverandre</strong>
                <p style={{ margin: '4px 0 0', fontSize: '14px', opacity: 0.9 }}>
                  N√•r lydkilden beveger seg utover, presser den luftmolekylene sammen (kompresjon). 
                  N√•r den beveger seg innover, blir det mindre tett (fortynning).
                </p>
              </div>
            </div>
            <div style={{ display: 'flex', alignItems: 'flex-start', gap: '12px' }}>
              <span style={{ fontSize: '24px' }}>üåä</span>
              <div>
                <strong>3. Kompresjonen sprer seg gjennom luften</strong>
                <p style={{ margin: '4px 0 0', fontSize: '14px', opacity: 0.9 }}>
                  Omr√•dene med h√∏yt og lavt trykk forplanter seg utover med ~343 m/s (lydens hastighet i luft).
                  Luftmolekylene selv flytter seg ikke langt - de bare dytter p√• nabomolekylene!
                </p>
              </div>
            </div>
            <div style={{ display: 'flex', alignItems: 'flex-start', gap: '12px' }}>
              <span style={{ fontSize: '24px' }}>üëÇ</span>
              <div>
                <strong>4. Trommehinnen vibrerer</strong>
                <p style={{ margin: '4px 0 0', fontSize: '14px', opacity: 0.9 }}>
                  N√•r trykkb√∏lgen treffer √∏ret ditt, f√•r den trommehinnen til √• vibrere i samme rytme. 
                  Hjernen tolker dette som lyd!
                </p>
              </div>
            </div>
          </div>
        </div>
        
        <SoundWaveDemo />
        
        <div style={{ marginTop: '16px', display: 'grid', gap: '8px' }}>
          <p style={{ fontSize: '14px' }}><strong>Eksempler p√• langsg√•ende b√∏lger:</strong></p>
          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
            {['Lydb√∏lger i luft', 'Lydb√∏lger i vann', 'Lydb√∏lger i metall', 'P-b√∏lger (jordskjelv)'].map((ex, i) => (
              <span key={i} style={{ padding: '6px 12px', background: 'rgba(245,158,11,0.2)', borderRadius: '16px', fontSize: '13px' }}>{ex}</span>
            ))}
          </div>
        </div>
      </ContentCard>

      {/* SAMMENLIGNING */}
      <ContentCard>
        <h3 style={{ color: color, marginBottom: '16px' }}>‚öñÔ∏è Sammenligning</h3>
        <div style={{ overflowX: 'auto' }}>
          <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: '14px' }}>
            <thead>
              <tr style={{ background: 'rgba(255,255,255,0.1)' }}>
                <th style={{ padding: '12px', textAlign: 'left', borderBottom: '2px solid rgba(255,255,255,0.2)' }}></th>
                <th style={{ padding: '12px', textAlign: 'left', borderBottom: '2px solid rgba(255,255,255,0.2)', color: '#0ea5e9' }}>‚ÜïÔ∏è Tverrb√∏lge</th>
                <th style={{ padding: '12px', textAlign: 'left', borderBottom: '2px solid rgba(255,255,255,0.2)', color: '#f59e0b' }}>‚ÜîÔ∏è Langsg√•ende</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style={{ padding: '10px', borderBottom: '1px solid rgba(255,255,255,0.1)' }}><strong>Svingningsretning</strong></td>
                <td style={{ padding: '10px', borderBottom: '1px solid rgba(255,255,255,0.1)' }}>Vinkelrett p√• bevegelsen</td>
                <td style={{ padding: '10px', borderBottom: '1px solid rgba(255,255,255,0.1)' }}>Parallelt med bevegelsen</td>
              </tr>
              <tr>
                <td style={{ padding: '10px', borderBottom: '1px solid rgba(255,255,255,0.1)' }}><strong>Trenger medium?</strong></td>
                <td style={{ padding: '10px', borderBottom: '1px solid rgba(255,255,255,0.1)' }}>Nei (EM-b√∏lger g√•r i vakuum)</td>
                <td style={{ padding: '10px', borderBottom: '1px solid rgba(255,255,255,0.1)' }}>Ja (trenger stoff √• presse sammen)</td>
              </tr>
              <tr>
                <td style={{ padding: '10px', borderBottom: '1px solid rgba(255,255,255,0.1)' }}><strong>Eksempel</strong></td>
                <td style={{ padding: '10px', borderBottom: '1px solid rgba(255,255,255,0.1)' }}>Lys, radiob√∏lger, tau</td>
                <td style={{ padding: '10px', borderBottom: '1px solid rgba(255,255,255,0.1)' }}>Lyd i luft/vann</td>
              </tr>
              <tr>
                <td style={{ padding: '10px' }}><strong>I verdensrommet?</strong></td>
                <td style={{ padding: '10px' }}>‚úÖ Ja</td>
                <td style={{ padding: '10px' }}>‚ùå Nei (ingen luft!)</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div style={{
          background: 'rgba(139,92,246,0.1)',
          borderRadius: '8px',
          padding: '16px',
          marginTop: '16px',
          borderLeft: '4px solid #8b5cf6'
        }}>
          <strong>üé¨ Filmmyte avsl√∏rt!</strong>
          <p style={{ margin: '8px 0 0', fontSize: '14px' }}>
            I Star Wars og andre filmer h√∏rer vi eksplosjoner i verdensrommet. Men det er fysisk umulig! 
            Lyd er langsg√•ende b√∏lger som trenger et medium (luft, vann, etc.) √• bevege seg gjennom. 
            I verdensrommet er det vakuum - ingen luft - s√• ingen lyd kan forplante seg der.
          </p>
        </div>
      </ContentCard>

      <ContentCard>
        <h3 style={{ color: color, marginBottom: '12px' }}>üí° Viktig om EM-b√∏lger</h3>
        <p style={{ lineHeight: '1.7' }}>
          Elektromagnetiske b√∏lger er <strong>tverrb√∏lger</strong>. Men de er spesielle - 
          de trenger ikke noe medium √• bevege seg gjennom! Lydb√∏lger trenger luft, 
          vannb√∏lger trenger vann, men EM-b√∏lger kan reise gjennom <strong>vakuum</strong> 
          (tomt rom). Det er derfor lys fra solen kan n√• oss gjennom verdensrommet.
        </p>
      </ContentCard>

      <DiscussionBox
        color={color}
        question="Hvorfor kan du se astronauter p√• m√•nen, men ikke h√∏re dem uten radio?"
        helpText="Tenk p√• hvilken type b√∏lge lys er vs. lyd, og hva de trenger for √• bevege seg..."
      />
    </>
  );
}

// Animasjon for langsg√•ende b√∏lger
function LongitudinalWaveAnimation() {
  const canvasRef = useRef(null);
  const animationRef = useRef(null);
  const timeRef = useRef(0);
  
  useEffect(() => {
    const canvas = canvasRef.current;
    const ctx = canvas.getContext('2d');
    
    const animate = () => {
      ctx.fillStyle = '#0f172a';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      const numParticles = 40;
      const baseSpacing = canvas.width / numParticles;
      const centerY = canvas.height / 2;
      
      // Tegn partikler
      for (let i = 0; i < numParticles; i++) {
        const baseX = i * baseSpacing + 20;
        // Partiklene beveger seg frem og tilbake (parallelt med b√∏lgeretningen)
        const displacement = 15 * Math.sin((i * 0.3) - timeRef.current * 0.05);
        const x = baseX + displacement;
        
        // Farge basert p√• kompresjon (tettere = m√∏rkere oransje)
        const density = Math.cos((i * 0.3) - timeRef.current * 0.05);
        const alpha = 0.5 + density * 0.3;
        
        ctx.fillStyle = `rgba(245, 158, 11, ${alpha})`;
        ctx.beginPath();
        ctx.arc(x, centerY, 6, 0, Math.PI * 2);
        ctx.fill();
      }
      
      // Tekst
      ctx.fillStyle = 'rgba(255,255,255,0.7)';
      ctx.font = '12px sans-serif';
      ctx.fillText('Kompresjon (tett)', 50, 30);
      ctx.fillText('Fortynning (spredt)', 50, canvas.height - 15);
      ctx.fillText('‚Üê Partiklene svinger frem og tilbake ‚Üí', canvas.width - 220, 30);
      
      timeRef.current += 1;
      animationRef.current = requestAnimationFrame(animate);
    };
    
    animate();
    return () => cancelAnimationFrame(animationRef.current);
  }, []);
  
  return (
    <div style={{ background: '#0f172a', borderRadius: '12px', padding: '16px' }}>
      <canvas ref={canvasRef} width={700} height={120} style={{ width: '100%', height: 'auto' }} />
      <p style={{ textAlign: 'center', marginTop: '8px', fontSize: '13px', opacity: 0.7 }}>
        Se hvordan partiklene beveger seg frem og tilbake (ikke opp og ned!)
      </p>
    </div>
  );
}

// Interaktiv lyd-demo
function SoundWaveDemo() {
  const [isPlaying, setIsPlaying] = useState(false);
  const canvasRef = useRef(null);
  const animationRef = useRef(null);
  const timeRef = useRef(0);
  
  useEffect(() => {
    const canvas = canvasRef.current;
    const ctx = canvas.getContext('2d');
    
    const animate = () => {
      ctx.fillStyle = '#1e293b';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      // H√∏yttaler
      ctx.fillStyle = '#64748b';
      ctx.fillRect(30, 40, 30, 60);
      ctx.fillStyle = '#475569';
      ctx.beginPath();
      ctx.arc(45, 70, 15, 0, Math.PI * 2);
      ctx.fill();
      
      // H√∏yttaler-membran bevegelse
      const speakerDisp = isPlaying ? 5 * Math.sin(timeRef.current * 0.1) : 0;
      ctx.fillStyle = '#94a3b8';
      ctx.beginPath();
      ctx.arc(45 + speakerDisp, 70, 10, 0, Math.PI * 2);
      ctx.fill();
      
      // Lydb√∏lger (sirkler)
      if (isPlaying) {
        for (let i = 0; i < 5; i++) {
          const radius = ((timeRef.current * 2 + i * 40) % 200) + 30;
          const alpha = Math.max(0, 1 - radius / 230);
          ctx.strokeStyle = `rgba(245, 158, 11, ${alpha})`;
          ctx.lineWidth = 3;
          ctx.beginPath();
          ctx.arc(60, 70, radius, -Math.PI/3, Math.PI/3);
          ctx.stroke();
        }
      }
      
      // √òre
      ctx.fillStyle = '#fbbf24';
      ctx.font = '36px sans-serif';
      ctx.fillText('üëÇ', canvas.width - 70, 82);
      
      // Trommehinne-visualisering
      if (isPlaying) {
        const earDisp = 3 * Math.sin(timeRef.current * 0.1 - 3);
        ctx.fillStyle = 'rgba(245, 158, 11, 0.5)';
        ctx.beginPath();
        ctx.arc(canvas.width - 50 + earDisp, 70, 8, 0, Math.PI * 2);
        ctx.fill();
      }
      
      // Labels
      ctx.fillStyle = 'white';
      ctx.font = '12px sans-serif';
      ctx.fillText('H√∏yttaler', 25, 120);
      ctx.fillText('Trykkb√∏lger i luft', canvas.width/2 - 50, 120);
      ctx.fillText('Trommehinne', canvas.width - 85, 120);
      
      if (isPlaying) timeRef.current += 1;
      animationRef.current = requestAnimationFrame(animate);
    };
    
    animate();
    return () => cancelAnimationFrame(animationRef.current);
  }, [isPlaying]);
  
  return (
    <div style={{ 
      background: '#1e293b', 
      borderRadius: '12px', 
      padding: '16px',
      marginTop: '16px'
    }}>
      <canvas ref={canvasRef} width={500} height={140} style={{ width: '100%', height: 'auto' }} />
      <div style={{ textAlign: 'center', marginTop: '12px' }}>
        <button
          onClick={() => setIsPlaying(!isPlaying)}
          style={{
            padding: '10px 24px',
            borderRadius: '8px',
            border: 'none',
            background: isPlaying ? '#ef4444' : '#10b981',
            color: 'white',
            cursor: 'pointer',
            fontWeight: '500',
            fontSize: '14px'
          }}
        >
          {isPlaying ? '‚èπÔ∏è Stopp' : '‚ñ∂Ô∏è Spill av lyd'}
        </button>
        <p style={{ marginTop: '8px', fontSize: '13px', opacity: 0.7 }}>
          Se hvordan trykkb√∏lgene sprer seg fra h√∏yttaleren til √∏ret
        </p>
      </div>
    </div>
  );
}

function WaveBasicAnimation({ color }) {
  const canvasRef = useRef(null);
  const animationRef = useRef(null);
  const timeRef = useRef(0);
  
  useEffect(() => {
    const canvas = canvasRef.current;
    const ctx = canvas.getContext('2d');
    
    const animate = () => {
      ctx.fillStyle = '#0f172a';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      const numParticles = 20;
      for (let i = 0; i < numParticles; i++) {
        const x = (canvas.width / numParticles) * i + 30;
        const y = canvas.height / 2 + 40 * Math.sin((x * 0.02) - timeRef.current * 0.03);
        
        ctx.strokeStyle = 'rgba(255,255,255,0.2)';
        ctx.beginPath();
        ctx.moveTo(x, canvas.height / 2 - 50);
        ctx.lineTo(x, canvas.height / 2 + 50);
        ctx.stroke();
        
        ctx.fillStyle = color;
        ctx.beginPath();
        ctx.arc(x, y, 8, 0, Math.PI * 2);
        ctx.fill();
      }
      
      ctx.strokeStyle = color;
      ctx.lineWidth = 3;
      ctx.beginPath();
      for (let x = 0; x < canvas.width; x++) {
        const y = canvas.height / 2 + 40 * Math.sin((x * 0.02) - timeRef.current * 0.03);
        if (x === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.stroke();
      
      ctx.fillStyle = '#10b981';
      ctx.font = '14px sans-serif';
      ctx.fillText('B√∏lgen beveger seg ‚Üí', canvas.width - 150, 30);
      ctx.fillText('Partiklene beveger seg ‚Üï', 10, 30);
      
      timeRef.current += 1;
      animationRef.current = requestAnimationFrame(animate);
    };
    
    animate();
    return () => cancelAnimationFrame(animationRef.current);
  }, [color]);
  
  return (
    <div style={{ background: '#0f172a', borderRadius: '12px', padding: '16px' }}>
      <canvas ref={canvasRef} width={700} height={200} style={{ width: '100%', height: 'auto' }} />
      <p style={{ textAlign: 'center', marginTop: '12px', fontSize: '14px', opacity: 0.7 }}>
        Se hvordan partiklene beveger seg opp og ned, mens b√∏lgen beveger seg til h√∏yre
      </p>
    </div>
  );
}


// ===== B√òLGEEGENSKAPER =====
function PropertiesSection({ color, markComplete }) {
  const [amplitude, setAmplitude] = useState(50);
  const [frequency, setFrequency] = useState(2);
  
  useEffect(() => { markComplete(); }, []);

  return (
    <>
      <ContentCard>
        <h2 style={{ color: color, marginBottom: '16px' }}>üìê B√∏lgens egenskaper</h2>
        <p style={{ fontSize: '17px', lineHeight: '1.8', marginBottom: '24px' }}>
          For √• beskrive en b√∏lge trenger vi tre viktige begreper: 
          <strong> amplitude</strong>, <strong>b√∏lgelengde</strong> og <strong>frekvens</strong>.
        </p>

        <WavePropertiesSimulation amplitude={amplitude} frequency={frequency} color={color} />
        
        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '16px', marginTop: '20px' }}>
          <div>
            <label style={{ display: 'block', marginBottom: '8px', fontSize: '14px' }}>
              <span style={{ color: '#10b981' }}>‚ñ†</span> Amplitude (A): {amplitude} px
            </label>
            <input type="range" min="20" max="80" value={amplitude} onChange={(e) => setAmplitude(parseInt(e.target.value))} style={{ width: '100%' }} />
          </div>
          <div>
            <label style={{ display: 'block', marginBottom: '8px', fontSize: '14px' }}>
              <span style={{ color: '#f59e0b' }}>‚ñ†</span> Frekvens (f): {frequency} Hz
            </label>
            <input type="range" min="1" max="5" step="0.5" value={frequency} onChange={(e) => setFrequency(parseFloat(e.target.value))} style={{ width: '100%' }} />
          </div>
        </div>
      </ContentCard>

      <ContentCard>
        <h3 style={{ color: color, marginBottom: '16px' }}>üìö De tre viktige begrepene</h3>
        <div style={{ display: 'grid', gap: '16px' }}>
          {[
            { term: 'Amplitude (A)', color: '#10b981', def: 'St√∏rst avstand fra hvilestillingen', meaning: 'Beskriver b√∏lgens styrke eller intensitet', ex: 'H√∏y lydb√∏lge = h√∏yt volum' },
            { term: 'B√∏lgelengde (Œª)', color: '#f59e0b', def: 'Avstanden mellom to identiske punkter (topp til topp)', meaning: 'M√•les i meter (m) eller nanometer (nm)', ex: 'R√∏dt lys: ~700 nm. WiFi: ~12 cm' },
            { term: 'Frekvens (f)', color: '#8b5cf6', def: 'Antall svingninger per sekund', meaning: 'M√•les i Hertz (Hz)', ex: 'WiFi: 2,4 GHz. Lys: ~500 THz' }
          ].map((item, i) => (
            <div key={i} style={{ background: 'rgba(0,0,0,0.2)', borderRadius: '12px', padding: '16px', borderLeft: `4px solid ${item.color}` }}>
              <h4 style={{ color: item.color, marginBottom: '8px' }}>{item.term}</h4>
              <p style={{ margin: '0 0 4px' }}><strong>Definisjon:</strong> {item.def}</p>
              <p style={{ margin: '0 0 4px', fontSize: '14px', opacity: 0.9 }}><strong>Betydning:</strong> {item.meaning}</p>
              <p style={{ margin: 0, fontSize: '14px', opacity: 0.8 }}><strong>Eksempel:</strong> {item.ex}</p>
            </div>
          ))}
        </div>
      </ContentCard>

      <DiscussionBox
        color={color}
        question="Hvis du √∏ker frekvensen p√• simuleringen - hva skjer med b√∏lgelengden? Hvorfor tror du det er slik?"
      />
    </>
  );
}

function WavePropertiesSimulation({ amplitude, frequency, color }) {
  const canvasRef = useRef(null);
  const animationRef = useRef(null);
  const timeRef = useRef(0);
  const wavelength = 150 / frequency;
  
  useEffect(() => {
    const canvas = canvasRef.current;
    const ctx = canvas.getContext('2d');
    
    const animate = () => {
      ctx.fillStyle = '#0f172a';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      const centerY = canvas.height / 2;
      
      // Grid
      ctx.strokeStyle = 'rgba(255,255,255,0.1)';
      ctx.lineWidth = 1;
      for (let x = 0; x < canvas.width; x += 50) {
        ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, canvas.height); ctx.stroke();
      }
      
      // Center line
      ctx.strokeStyle = 'rgba(255,255,255,0.3)';
      ctx.setLineDash([5, 5]);
      ctx.beginPath(); ctx.moveTo(0, centerY); ctx.lineTo(canvas.width, centerY); ctx.stroke();
      ctx.setLineDash([]);
      
      // Wave
      ctx.strokeStyle = color;
      ctx.lineWidth = 3;
      ctx.beginPath();
      for (let x = 0; x < canvas.width; x++) {
        const y = centerY + amplitude * Math.sin((x / wavelength) * 2 * Math.PI - timeRef.current * 0.05);
        if (x === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
      }
      ctx.stroke();
      
      // Amplitude indicator
      ctx.strokeStyle = '#10b981';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(80, centerY);
      ctx.lineTo(80, centerY - amplitude);
      ctx.stroke();
      ctx.fillStyle = '#10b981';
      ctx.font = 'bold 14px sans-serif';
      ctx.fillText('A', 90, centerY - amplitude/2 + 5);
      
      // Wavelength indicator
      ctx.strokeStyle = '#f59e0b';
      ctx.lineWidth = 2;
      const wlY = centerY - amplitude - 25;
      ctx.beginPath();
      ctx.moveTo(150, wlY); ctx.lineTo(150 + wavelength, wlY);
      ctx.moveTo(150, wlY - 10); ctx.lineTo(150, wlY + 10);
      ctx.moveTo(150 + wavelength, wlY - 10); ctx.lineTo(150 + wavelength, wlY + 10);
      ctx.stroke();
      ctx.fillStyle = '#f59e0b';
      ctx.fillText('Œª', 150 + wavelength/2 - 5, wlY - 10);
      
      // Info
      ctx.fillStyle = 'rgba(0,0,0,0.6)';
      ctx.fillRect(canvas.width - 170, 10, 160, 50);
      ctx.fillStyle = 'white';
      ctx.font = '13px sans-serif';
      ctx.fillText(`B√∏lgelengde: ${wavelength.toFixed(0)} px`, canvas.width - 160, 32);
      ctx.fillText(`Frekvens: ${frequency} Hz`, canvas.width - 160, 52);
      
      timeRef.current += 1;
      animationRef.current = requestAnimationFrame(animate);
    };
    
    animate();
    return () => cancelAnimationFrame(animationRef.current);
  }, [amplitude, frequency, wavelength, color]);
  
  return (
    <div style={{ background: '#0f172a', borderRadius: '12px', padding: '16px' }}>
      <canvas ref={canvasRef} width={700} height={220} style={{ width: '100%', height: 'auto' }} />
    </div>
  );
}


// ===== B√òLGEFORMELEN =====
function FormulaSection({ color, markComplete }) {
  useEffect(() => { markComplete(); }, []);

  return (
    <>
      <ContentCard>
        <h2 style={{ color: color, marginBottom: '16px' }}>üßÆ B√∏lgeformelen</h2>
        
        <div style={{
          background: 'linear-gradient(135deg, rgba(14,165,233,0.2), rgba(59,130,246,0.2))',
          borderRadius: '16px',
          padding: '32px',
          textAlign: 'center',
          marginBottom: '24px'
        }}>
          <div style={{ fontSize: '48px', fontFamily: 'Georgia, serif', marginBottom: '16px' }}>
            v = f √ó Œª
          </div>
          <div style={{ display: 'flex', justifyContent: 'center', gap: '32px', flexWrap: 'wrap' }}>
            <span><strong>v</strong> = hastighet (m/s)</span>
            <span><strong>f</strong> = frekvens (Hz)</span>
            <span><strong>Œª</strong> = b√∏lgelengde (m)</span>
          </div>
        </div>
        
        <div style={{
          background: 'rgba(16,185,129,0.1)',
          borderRadius: '12px',
          padding: '16px',
          borderLeft: '4px solid #10b981'
        }}>
          <p style={{ margin: 0 }}>
            <strong>üí° Viktig:</strong> Alle EM-b√∏lger har samme hastighet i vakuum: 
            <strong> c = 3 √ó 10‚Å∏ m/s</strong>. Hvis frekvensen √∏ker, m√• b√∏lgelengden bli kortere!
          </p>
        </div>
      </ContentCard>

      <ContentCard>
        <h3 style={{ color: color, marginBottom: '16px' }}>üî¢ Interaktiv kalkulator</h3>
        <FormulaCalculator color={color} />
      </ContentCard>
    </>
  );
}

function FormulaCalculator({ color }) {
  const [frequency, setFrequency] = useState('2.4e9');
  const [result, setResult] = useState(null);
  
  const calculate = () => {
    const f = parseFloat(frequency);
    if (f > 0) {
      const wavelength = 3e8 / f;
      setResult(wavelength);
    }
  };
  
  const formatWavelength = (w) => {
    if (w >= 1) return `${w.toFixed(2)} m`;
    if (w >= 0.01) return `${(w * 100).toFixed(2)} cm`;
    if (w >= 0.001) return `${(w * 1000).toFixed(2)} mm`;
    if (w >= 1e-6) return `${(w * 1e6).toFixed(2)} Œºm`;
    return `${(w * 1e9).toFixed(2)} nm`;
  };
  
  return (
    <div style={{ background: 'rgba(0,0,0,0.3)', borderRadius: '12px', padding: '20px' }}>
      <p style={{ marginBottom: '16px' }}>Skriv inn frekvens for √• beregne b√∏lgelengde (bruker c = 3 √ó 10‚Å∏ m/s):</p>
      
      <div style={{ display: 'flex', gap: '12px', flexWrap: 'wrap', marginBottom: '16px' }}>
        <input
          type="text"
          value={frequency}
          onChange={(e) => setFrequency(e.target.value)}
          placeholder="F.eks. 2.4e9"
          style={{
            flex: 1,
            minWidth: '200px',
            padding: '12px',
            borderRadius: '8px',
            border: '1px solid rgba(255,255,255,0.2)',
            background: 'rgba(255,255,255,0.05)',
            color: 'white',
            fontSize: '16px'
          }}
        />
        <button
          onClick={calculate}
          style={{
            padding: '12px 24px',
            borderRadius: '8px',
            border: 'none',
            background: color,
            color: 'white',
            cursor: 'pointer',
            fontWeight: '500'
          }}
        >
          Beregn Œª
        </button>
      </div>
      
      <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap', marginBottom: '16px' }}>
        <span style={{ opacity: 0.7, alignSelf: 'center' }}>Hurtigvalg:</span>
        {[
          { label: 'WiFi 2.4 GHz', value: '2.4e9' },
          { label: 'WiFi 5 GHz', value: '5e9' },
          { label: 'FM-radio 100 MHz', value: '100e6' },
          { label: 'R√∏dt lys', value: '4.3e14' }
        ].map((preset) => (
          <button
            key={preset.value}
            onClick={() => { setFrequency(preset.value); }}
            style={{
              padding: '6px 12px',
              borderRadius: '6px',
              border: 'none',
              background: 'rgba(255,255,255,0.1)',
              color: 'white',
              cursor: 'pointer',
              fontSize: '13px'
            }}
          >
            {preset.label}
          </button>
        ))}
      </div>
      
      {result && (
        <div style={{
          background: `${color}22`,
          borderRadius: '8px',
          padding: '16px',
          textAlign: 'center'
        }}>
          <p style={{ margin: 0, fontSize: '14px', opacity: 0.7 }}>B√∏lgelengde:</p>
          <p style={{ margin: '8px 0 0', fontSize: '28px', fontWeight: '600', color: color }}>
            Œª = {formatWavelength(result)}
          </p>
        </div>
      )}
    </div>
  );
}


// ===== EM-SPEKTERET (FORBEDRET) =====
function EMSpectrumSection({ color, markComplete }) {
  useEffect(() => { markComplete(); }, []);

  return (
    <>
      <ContentCard>
        <h2 style={{ color: color, marginBottom: '16px' }}>üåà Det elektromagnetiske spekteret</h2>
        <p style={{ fontSize: '17px', lineHeight: '1.8', marginBottom: '24px' }}>
          Alle elektromagnetiske b√∏lger er egentlig samme fenomen - bare med forskjellig 
          b√∏lgelengde og frekvens. Dra i slideren for √• utforske spekteret!
        </p>
      </ContentCard>

      <ContentCard>
        <h3 style={{ color: color, marginBottom: '16px' }}>üîç Interaktiv spektrum-utforsker</h3>
        <EMSpectrumExplorer />
      </ContentCard>

      <ContentCard>
        <h3 style={{ color: color, marginBottom: '16px' }}>üìä Visuell sammenligning av b√∏lgelengder</h3>
        <WavelengthComparison />
      </ContentCard>

      <DiscussionBox
        color={color}
        question="Hvorfor tror du vi bruker radiob√∏lger til kommunikasjon, og ikke f.eks. r√∏ntgen?"
        helpText="Tenk p√• energi, gjennomtrenging og sikkerhet..."
      />
    </>
  );
}

function EMSpectrumExplorer() {
  const [position, setPosition] = useState(50); // 0-100
  const canvasRef = useRef(null);
  
  // Konverter posisjon til frekvens (logaritmisk skala)
  // 0 = 10^3 Hz (1 kHz), 100 = 10^20 Hz
  const minLog = 3;
  const maxLog = 20;
  const logFreq = minLog + (position / 100) * (maxLog - minLog);
  const frequency = Math.pow(10, logFreq);
  const wavelength = 3e8 / frequency;
  
  const getWaveType = () => {
    if (logFreq < 9) return { name: 'Radiob√∏lger', color: '#ef4444', icon: 'üìª', safe: true };
    if (logFreq < 11.5) return { name: 'Mikrob√∏lger', color: '#f97316', icon: 'üì°', safe: true };
    if (logFreq < 14.5) return { name: 'Infrar√∏d', color: '#eab308', icon: 'üî•', safe: true };
    if (logFreq < 14.9) return { name: 'Synlig lys', color: '#22c55e', icon: 'üí°', safe: true };
    if (logFreq < 16.5) return { name: 'Ultrafiolett', color: '#8b5cf6', icon: 'üîÆ', safe: false };
    if (logFreq < 19) return { name: 'R√∏ntgen', color: '#06b6d4', icon: 'ü©ª', safe: false };
    return { name: 'Gammastr√•ling', color: '#ec4899', icon: '‚ò¢Ô∏è', safe: false };
  };
  
  const getUses = () => {
    if (logFreq < 7) return ['AM-radio', 'Langb√∏lge'];
    if (logFreq < 8.5) return ['FM-radio', 'TV-signaler'];
    if (logFreq < 9.5) return ['WiFi', 'Bluetooth', '4G/5G'];
    if (logFreq < 11) return ['Radar', 'Satellitt', 'Mikrob√∏lgeovn'];
    if (logFreq < 14) return ['Fjernkontroll', 'Varmekamera', 'Nattbriller'];
    if (logFreq < 14.9) return ['Syn', 'Fotografering', 'Fiberoptikk'];
    if (logFreq < 16) return ['Solarium', 'Desinfeksjon', 'Pengesjekk'];
    if (logFreq < 19) return ['Medisinsk r√∏ntgen', 'Sikkerhetsskanning'];
    return ['Str√•lebehandling', 'Sterilisering'];
  };
  
  const formatFreq = () => {
    if (frequency < 1e3) return `${frequency.toFixed(0)} Hz`;
    if (frequency < 1e6) return `${(frequency/1e3).toFixed(1)} kHz`;
    if (frequency < 1e9) return `${(frequency/1e6).toFixed(1)} MHz`;
    if (frequency < 1e12) return `${(frequency/1e9).toFixed(1)} GHz`;
    if (frequency < 1e15) return `${(frequency/1e12).toFixed(1)} THz`;
    if (frequency < 1e18) return `${(frequency/1e15).toFixed(1)} PHz`;
    return `${(frequency/1e18).toFixed(1)} EHz`;
  };
  
  const formatWavelength = () => {
    if (wavelength >= 1000) return `${(wavelength/1000).toFixed(1)} km`;
    if (wavelength >= 1) return `${wavelength.toFixed(2)} m`;
    if (wavelength >= 0.01) return `${(wavelength*100).toFixed(1)} cm`;
    if (wavelength >= 0.001) return `${(wavelength*1000).toFixed(2)} mm`;
    if (wavelength >= 1e-6) return `${(wavelength*1e6).toFixed(2)} Œºm`;
    if (wavelength >= 1e-9) return `${(wavelength*1e9).toFixed(2)} nm`;
    return `${(wavelength*1e12).toFixed(2)} pm`;
  };
  
  const waveType = getWaveType();
  const uses = getUses();
  
  // Tegn b√∏lge med riktig relativ b√∏lgelengde
  useEffect(() => {
    const canvas = canvasRef.current;
    const ctx = canvas.getContext('2d');
    
    ctx.fillStyle = '#0f172a';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // Beregn visuell b√∏lgelengde (logaritmisk for √• vise forskjeller)
    const visualWavelength = Math.max(5, Math.min(200, 200 - (logFreq - minLog) * 12));
    
    ctx.strokeStyle = waveType.color;
    ctx.lineWidth = 3;
    ctx.beginPath();
    
    for (let x = 0; x < canvas.width; x++) {
      const y = canvas.height / 2 + 30 * Math.sin((x / visualWavelength) * 2 * Math.PI);
      if (x === 0) ctx.moveTo(x, y);
      else ctx.lineTo(x, y);
    }
    ctx.stroke();
    
    // Vis b√∏lgelengde-mark√∏r
    ctx.strokeStyle = 'rgba(255,255,255,0.5)';
    ctx.lineWidth = 1;
    ctx.setLineDash([5, 5]);
    ctx.beginPath();
    ctx.moveTo(50, 20);
    ctx.lineTo(50, canvas.height - 20);
    ctx.moveTo(50 + visualWavelength, 20);
    ctx.lineTo(50 + visualWavelength, canvas.height - 20);
    ctx.stroke();
    ctx.setLineDash([]);
    
    ctx.fillStyle = 'white';
    ctx.font = '12px sans-serif';
    ctx.fillText('Œª', 50 + visualWavelength/2 - 5, 15);
    
  }, [position, waveType.color, logFreq]);
  
  return (
    <div style={{ background: 'rgba(0,0,0,0.3)', borderRadius: '12px', padding: '20px' }}>
      {/* Spektrum-bar */}
      <div style={{
        height: '40px',
        borderRadius: '8px',
        background: 'linear-gradient(90deg, #ef4444 0%, #f97316 15%, #eab308 30%, #22c55e 45%, #3b82f6 50%, #8b5cf6 55%, #a855f7 60%, #06b6d4 75%, #ec4899 100%)',
        position: 'relative',
        marginBottom: '8px'
      }}>
        {/* Mark√∏r */}
        <div style={{
          position: 'absolute',
          left: `${position}%`,
          top: '-8px',
          transform: 'translateX(-50%)',
          width: '4px',
          height: '56px',
          background: 'white',
          borderRadius: '2px',
          boxShadow: '0 0 10px rgba(255,255,255,0.5)'
        }} />
      </div>
      
      {/* Slider */}
      <input
        type="range"
        min="0"
        max="100"
        value={position}
        onChange={(e) => setPosition(parseInt(e.target.value))}
        style={{ width: '100%', marginBottom: '16px' }}
      />
      
      <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '11px', opacity: 0.6, marginBottom: '20px' }}>
        <span>Radiob√∏lger</span>
        <span>Mikro</span>
        <span>IR</span>
        <span>Lys</span>
        <span>UV</span>
        <span>R√∏ntgen</span>
        <span>Gamma</span>
      </div>
      
      {/* B√∏lgevisning */}
      <canvas
        ref={canvasRef}
        width={600}
        height={100}
        style={{ width: '100%', height: 'auto', borderRadius: '8px', marginBottom: '16px' }}
      />
      
      {/* Info-panel */}
      <div style={{
        display: 'grid',
        gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',
        gap: '12px',
        marginBottom: '16px'
      }}>
        <div style={{ background: 'rgba(255,255,255,0.1)', borderRadius: '8px', padding: '12px', textAlign: 'center' }}>
          <p style={{ fontSize: '12px', opacity: 0.7, margin: '0 0 4px' }}>Type</p>
          <p style={{ fontSize: '18px', fontWeight: '600', color: waveType.color, margin: 0 }}>
            {waveType.icon} {waveType.name}
          </p>
        </div>
        <div style={{ background: 'rgba(255,255,255,0.1)', borderRadius: '8px', padding: '12px', textAlign: 'center' }}>
          <p style={{ fontSize: '12px', opacity: 0.7, margin: '0 0 4px' }}>Frekvens</p>
          <p style={{ fontSize: '18px', fontWeight: '600', color: '#f59e0b', margin: 0 }}>{formatFreq()}</p>
        </div>
        <div style={{ background: 'rgba(255,255,255,0.1)', borderRadius: '8px', padding: '12px', textAlign: 'center' }}>
          <p style={{ fontSize: '12px', opacity: 0.7, margin: '0 0 4px' }}>B√∏lgelengde</p>
          <p style={{ fontSize: '18px', fontWeight: '600', color: '#10b981', margin: 0 }}>{formatWavelength()}</p>
        </div>
      </div>
      
      {/* Bruksomr√•der */}
      <div style={{ marginBottom: '12px' }}>
        <p style={{ fontSize: '14px', opacity: 0.7, marginBottom: '8px' }}>Brukes til:</p>
        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
          {uses.map((use, i) => (
            <span key={i} style={{
              padding: '4px 12px',
              background: `${waveType.color}33`,
              borderRadius: '12px',
              fontSize: '13px'
            }}>
              {use}
            </span>
          ))}
        </div>
      </div>
      
      {/* Sikkerhetsindikator */}
      <div style={{
        padding: '12px',
        borderRadius: '8px',
        background: waveType.safe ? 'rgba(16,185,129,0.2)' : 'rgba(239,68,68,0.2)',
        display: 'flex',
        alignItems: 'center',
        gap: '8px'
      }}>
        <span style={{ fontSize: '20px' }}>{waveType.safe ? '‚úÖ' : '‚ò¢Ô∏è'}</span>
        <span style={{ fontSize: '14px' }}>
          {waveType.safe 
            ? 'Ikke-ioniserende str√•ling - trygt ved normal bruk'
            : 'Ioniserende str√•ling - kan skade celler og DNA!'
          }
        </span>
      </div>
    </div>
  );
}

function WavelengthComparison() {
  const comparisons = [
    { name: 'FM-radio (100 MHz)', wavelength: 3, unit: 'm', visual: 300, comparison: 'Som en bil' },
    { name: 'WiFi (2.4 GHz)', wavelength: 12.5, unit: 'cm', visual: 125, comparison: 'Som en h√•nd' },
    { name: 'WiFi (5 GHz)', wavelength: 6, unit: 'cm', visual: 60, comparison: 'Som et kredittkort' },
    { name: '5G (28 GHz)', wavelength: 1.1, unit: 'cm', visual: 11, comparison: 'Som en fingernegl' },
    { name: 'Infrar√∏d (fjernkontroll)', wavelength: 950, unit: 'nm', visual: 3, comparison: 'Usynlig lite!' },
    { name: 'R√∏dt lys', wavelength: 700, unit: 'nm', visual: 2.5, comparison: 'Usynlig lite!' },
    { name: 'Bl√•tt lys', wavelength: 450, unit: 'nm', visual: 1.5, comparison: 'Usynlig lite!' },
  ];
  
  return (
    <div style={{ background: 'rgba(0,0,0,0.3)', borderRadius: '12px', padding: '20px' }}>
      <p style={{ marginBottom: '16px', opacity: 0.8 }}>
        Se hvor stor forskjell det er p√• b√∏lgelengdene! Bredden p√• strekene viser relativ st√∏rrelse:
      </p>
      
      <div style={{ display: 'grid', gap: '12px' }}>
        {comparisons.map((item, i) => (
          <div key={i} style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
            <div style={{ minWidth: '160px', fontSize: '13px' }}>{item.name}</div>
            <div style={{
              height: '20px',
              width: `${Math.max(item.visual, 4)}px`,
              background: `hsl(${200 - i * 25}, 70%, 50%)`,
              borderRadius: '4px',
              minWidth: '4px'
            }} />
            <div style={{ fontSize: '14px', opacity: 0.8 }}>
              {item.wavelength} {item.unit}
              <span style={{ fontSize: '12px', opacity: 0.6, marginLeft: '8px' }}>({item.comparison})</span>
            </div>
          </div>
        ))}
      </div>
      
      <p style={{ marginTop: '16px', fontSize: '13px', opacity: 0.7, fontStyle: 'italic' }}>
        üí° Legg merke til at WiFi har mye lengre b√∏lgelengde enn infrar√∏d fra fjernkontrollen - 
        det er derfor WiFi g√•r gjennom vegger, men fjernkontrollen ikke gj√∏r det!
      </p>
    </div>
  );
}


// ===== GJENNOM VEGGEN? =====
function PenetrationSection({ color, predictions, setPredictions, markComplete }) {
  useEffect(() => { markComplete(); }, []);

  return (
    <>
      <ContentCard>
        <h2 style={{ color: color, marginBottom: '16px' }}>üß± Hvorfor g√•r noen b√∏lger gjennom vegger?</h2>
        <p style={{ fontSize: '17px', lineHeight: '1.8', marginBottom: '20px' }}>
          Hvorfor fungerer WiFi i et annet rom, men fjernkontrollen bare n√•r du peker mot TV-en?
        </p>
        
        <div style={{
          background: 'rgba(0,0,0,0.3)',
          borderRadius: '12px',
          padding: '20px',
          marginBottom: '20px'
        }}>
          <h3 style={{ color: color, marginBottom: '12px' }}>üí° Svaret: B√∏lgelengden!</h3>
          <p style={{ lineHeight: '1.7', marginBottom: '16px' }}>
            Generelt: <strong>B√∏lger kan "g√• rundt" eller trenge gjennom hindringer som er 
            mindre enn b√∏lgelengden deres</strong>.
          </p>
          
          <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '16px' }}>
            <div style={{ background: 'rgba(16,185,129,0.1)', borderRadius: '8px', padding: '16px', border: '2px solid rgba(16,185,129,0.3)' }}>
              <h4 style={{ color: '#10b981', marginBottom: '8px' }}>üì∂ WiFi (2,4 GHz)</h4>
              <p style={{ fontSize: '14px' }}>B√∏lgelengde: <strong>~12 cm</strong></p>
              <p style={{ fontSize: '13px', opacity: 0.8, marginTop: '8px' }}>
                Mye st√∏rre enn strukturene i veggen ‚Üí g√•r gjennom, men svekkes
              </p>
            </div>
            <div style={{ background: 'rgba(239,68,68,0.1)', borderRadius: '8px', padding: '16px', border: '2px solid rgba(239,68,68,0.3)' }}>
              <h4 style={{ color: '#ef4444', marginBottom: '8px' }}>üéÆ Fjernkontroll (IR)</h4>
              <p style={{ fontSize: '14px' }}>B√∏lgelengde: <strong>~950 nm</strong></p>
              <p style={{ fontSize: '13px', opacity: 0.8, marginTop: '8px' }}>
                Veldig kort ‚Üí stoppes av nesten alle materialer
              </p>
            </div>
          </div>
        </div>
      </ContentCard>

      <ContentCard>
        <h3 style={{ color: color, marginBottom: '16px' }}>üéÆ Test: Hva g√•r gjennom hva?</h3>
        <PenetrationSimulator />
      </ContentCard>
    </>
  );
}

function PenetrationSimulator() {
  const [waveType, setWaveType] = useState('wifi24');
  const [material, setMaterial] = useState('wood');
  
  const waves = {
    wifi24: { name: 'WiFi 2.4 GHz', wavelength: '12 cm', color: '#10b981' },
    wifi5: { name: 'WiFi 5 GHz', wavelength: '6 cm', color: '#3b82f6' },
    bluetooth: { name: 'Bluetooth', wavelength: '12 cm', color: '#8b5cf6' },
    ir: { name: 'Infrar√∏d', wavelength: '950 nm', color: '#ef4444' },
    light: { name: 'Synlig lys', wavelength: '500 nm', color: '#eab308' }
  };
  
  const materials = {
    wood: { name: 'Trevegg', icon: 'ü™µ' },
    brick: { name: 'Murvegg', icon: 'üß±' },
    concrete: { name: 'Betong', icon: 'üèóÔ∏è' },
    glass: { name: 'Glass', icon: 'ü™ü' },
    metal: { name: 'Metall', icon: 'üî©' }
  };
  
  const penetration = {
    wifi24: { wood: 85, brick: 50, concrete: 30, glass: 90, metal: 5 },
    wifi5: { wood: 75, brick: 35, concrete: 15, glass: 85, metal: 5 },
    bluetooth: { wood: 80, brick: 45, concrete: 25, glass: 85, metal: 5 },
    ir: { wood: 0, brick: 0, concrete: 0, glass: 0, metal: 0 },
    light: { wood: 0, brick: 0, concrete: 0, glass: 90, metal: 0 }
  };
  
  const p = penetration[waveType][material];
  
  return (
    <div style={{ background: 'rgba(0,0,0,0.3)', borderRadius: '12px', padding: '20px' }}>
      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginBottom: '20px' }}>
        <div>
          <p style={{ marginBottom: '8px', fontSize: '14px', opacity: 0.7 }}>Velg b√∏lgetype:</p>
          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px' }}>
            {Object.entries(waves).map(([key, val]) => (
              <button
                key={key}
                onClick={() => setWaveType(key)}
                style={{
                  padding: '8px 12px',
                  borderRadius: '6px',
                  border: waveType === key ? `2px solid ${val.color}` : '2px solid transparent',
                  background: waveType === key ? `${val.color}22` : 'rgba(255,255,255,0.1)',
                  color: 'white',
                  cursor: 'pointer',
                  fontSize: '12px'
                }}
              >
                {val.name}
              </button>
            ))}
          </div>
        </div>
        <div>
          <p style={{ marginBottom: '8px', fontSize: '14px', opacity: 0.7 }}>Velg materiale:</p>
          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px' }}>
            {Object.entries(materials).map(([key, val]) => (
              <button
                key={key}
                onClick={() => setMaterial(key)}
                style={{
                  padding: '8px 12px',
                  borderRadius: '6px',
                  border: material === key ? '2px solid white' : '2px solid transparent',
                  background: material === key ? 'rgba(255,255,255,0.2)' : 'rgba(255,255,255,0.1)',
                  color: 'white',
                  cursor: 'pointer',
                  fontSize: '12px'
                }}
              >
                {val.icon} {val.name}
              </button>
            ))}
          </div>
        </div>
      </div>
      
      {/* Visualisering */}
      <div style={{
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        gap: '16px',
        padding: '24px',
        background: 'rgba(0,0,0,0.2)',
        borderRadius: '8px',
        marginBottom: '16px'
      }}>
        <div style={{ textAlign: 'center' }}>
          <div style={{ fontSize: '32px' }}>üì°</div>
          <div style={{ fontSize: '12px', marginTop: '4px' }}>Sender</div>
        </div>
        
        {/* B√∏lger f√∏r */}
        <div style={{ display: 'flex' }}>
          {[1,2,3].map(i => (
            <div key={i} style={{
              width: '30px',
              height: '4px',
              background: waves[waveType].color,
              marginRight: '4px',
              borderRadius: '2px'
            }} />
          ))}
        </div>
        
        {/* Vegg */}
        <div style={{
          width: '40px',
          height: '80px',
          background: material === 'glass' ? 'rgba(135,206,235,0.5)' : 
                      material === 'metal' ? '#71717a' :
                      material === 'concrete' ? '#6b7280' :
                      material === 'brick' ? '#b45309' : '#92400e',
          borderRadius: '4px',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          fontSize: '28px'
        }}>
          {materials[material].icon}
        </div>
        
        {/* B√∏lger etter */}
        <div style={{ display: 'flex' }}>
          {[1,2,3].map(i => (
            <div key={i} style={{
              width: '30px',
              height: `${Math.max(1, 4 * (p/100))}px`,
              background: waves[waveType].color,
              marginRight: '4px',
              borderRadius: '2px',
              opacity: p > 0 ? 0.7 : 0.1
            }} />
          ))}
        </div>
        
        <div style={{ textAlign: 'center' }}>
          <div style={{ fontSize: '32px' }}>üì±</div>
          <div style={{ fontSize: '12px', marginTop: '4px' }}>Mottaker</div>
        </div>
      </div>
      
      {/* Resultat */}
      <div style={{
        padding: '16px',
        borderRadius: '8px',
        background: p > 60 ? 'rgba(16,185,129,0.2)' : p > 20 ? 'rgba(245,158,11,0.2)' : 'rgba(239,68,68,0.2)',
        textAlign: 'center'
      }}>
        <p style={{ fontSize: '18px', fontWeight: '600', marginBottom: '4px' }}>
          {p === 0 && '‚ùå Stoppes helt!'}
          {p > 0 && p <= 20 && '‚ö†Ô∏è Sv√¶rt svakt signal'}
          {p > 20 && p <= 60 && 'üì∂ Svekket signal'}
          {p > 60 && '‚úÖ Godt signal'}
        </p>
        <p style={{ fontSize: '14px', opacity: 0.8 }}>
          Ca. {p}% av signalet kommer gjennom {materials[material].name.toLowerCase()}
        </p>
      </div>
    </div>
  );
}


// ===== BRUKSOMR√ÖDER =====
function UsesSection({ color, markComplete }) {
  useEffect(() => { markComplete(); }, []);
  
  const techs = [
    { name: 'WiFi', icon: 'üì∂', freq: '2,4 / 5 GHz', range: '~50 m innend√∏rs', color: '#10b981' },
    { name: '4G LTE', icon: 'üì±', freq: '700 MHz - 2,6 GHz', range: 'Opptil 35 km', color: '#3b82f6' },
    { name: '5G', icon: 'üöÄ', freq: '600 MHz - 86 GHz', range: '100 m - flere km', color: '#8b5cf6' },
    { name: 'Bluetooth', icon: 'üéß', freq: '2,4 GHz', range: '~10-100 m', color: '#0ea5e9' },
    { name: 'NFC', icon: 'üí≥', freq: '13,56 MHz', range: '< 20 cm', color: '#f59e0b' },
    { name: 'GPS', icon: 'üõ∞Ô∏è', freq: '1,2-1,6 GHz', range: 'Fra satellitt!', color: '#ef4444' },
    { name: 'FM-radio', icon: 'üìª', freq: '87,5-108 MHz', range: 'Opptil 100 km', color: '#ec4899' },
    { name: 'Fjernkontroll', icon: 'üéÆ', freq: '~300 THz (IR)', range: '< 10 m, fri sikt', color: '#f97316' }
  ];
  
  return (
    <>
      <ContentCard>
        <h2 style={{ color: color, marginBottom: '16px' }}>üì° Hva brukes b√∏lgene til?</h2>
        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(220px, 1fr))', gap: '12px' }}>
          {techs.map((tech, i) => (
            <div key={i} style={{
              background: `${tech.color}11`,
              borderRadius: '12px',
              padding: '16px',
              border: `1px solid ${tech.color}44`
            }}>
              <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '8px' }}>
                <span style={{ fontSize: '28px' }}>{tech.icon}</span>
                <span style={{ fontWeight: '600', color: tech.color }}>{tech.name}</span>
              </div>
              <p style={{ fontSize: '13px', margin: '4px 0' }}><strong>Frekvens:</strong> {tech.freq}</p>
              <p style={{ fontSize: '13px', margin: 0, opacity: 0.8 }}><strong>Rekkevidde:</strong> {tech.range}</p>
            </div>
          ))}
        </div>
      </ContentCard>
    </>
  );
}


// ===== STR√ÖLING OG HELSE =====
function HealthSection({ color, markComplete }) {
  useEffect(() => { markComplete(); }, []);
  
  return (
    <>
      <ContentCard>
        <h2 style={{ color: color, marginBottom: '16px' }}>‚öïÔ∏è Str√•ling og helse</h2>
        
        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '16px', marginBottom: '20px' }}>
          <div style={{ background: 'rgba(239,68,68,0.1)', borderRadius: '12px', padding: '20px', border: '2px solid rgba(239,68,68,0.3)' }}>
            <h3 style={{ color: '#ef4444', marginBottom: '12px' }}>‚ò¢Ô∏è Ioniserende</h3>
            <p style={{ marginBottom: '8px' }}>Kan l√∏srive elektroner ‚Üí skader DNA</p>
            <p style={{ fontSize: '14px', opacity: 0.8 }}>UV, r√∏ntgen, gammastr√•ling</p>
          </div>
          <div style={{ background: 'rgba(16,185,129,0.1)', borderRadius: '12px', padding: '20px', border: '2px solid rgba(16,185,129,0.3)' }}>
            <h3 style={{ color: '#10b981', marginBottom: '12px' }}>‚úÖ Ikke-ioniserende</h3>
            <p style={{ marginBottom: '8px' }}>Kan ikke skade DNA direkte</p>
            <p style={{ fontSize: '14px', opacity: 0.8 }}>Radio, WiFi, 4G/5G, lys, infrar√∏d</p>
          </div>
        </div>
        
        <div style={{ background: 'rgba(59,130,246,0.1)', borderRadius: '8px', padding: '16px' }}>
          <p style={{ margin: 0 }}>
            <strong>üí° Konklusjon:</strong> WiFi, mobilstr√•ling og Bluetooth er ikke-ioniserende og trygt ved normal bruk. 
            Det er ingen vitenskapelig dokumentasjon for helsefare fra disse teknologiene.
          </p>
        </div>
      </ContentCard>
    </>
  );
}


// ===== PRAKTISK FORS√òK =====
function PracticalSection({ color, markComplete }) {
  const [results, setResults] = useState({});
  
  useEffect(() => { markComplete(); }, []);
  
  const materials = [
    { id: 'hand', name: 'H√•nd', icon: '‚úã' },
    { id: 'paper', name: 'Papir (1 ark)', icon: 'üìÑ' },
    { id: 'paper3', name: 'Papir (3 ark)', icon: 'üìë' },
    { id: 'plastic', name: 'Plastpose', icon: 'üõçÔ∏è' },
    { id: 'fabric', name: 'T√∏ystoff', icon: 'üëï' },
    { id: 'cardboard', name: 'Papp/kartong', icon: 'üì¶' },
    { id: 'glass', name: 'Glass', icon: 'ü•õ' },
    { id: 'book', name: 'Bok', icon: 'üìï' },
    { id: 'water', name: 'Vannflaske', icon: 'üíß' }
  ];
  
  return (
    <>
      <ContentCard color="rgba(14,165,233,0.1)">
        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '16px' }}>
          <span style={{ fontSize: '48px' }}>üì±</span>
          <div>
            <h3 style={{ color: color, marginBottom: '12px' }}>üî¨ Fors√∏k 1: Se infrar√∏d med mobilen!</h3>
            <p style={{ marginBottom: '16px' }}>Mobilkameraet kan se lys √∏ynene dine ikke kan se!</p>
            
            <div style={{ display: 'grid', gap: '8px', marginBottom: '16px' }}>
              {[
                '√Öpne kamera-appen (pr√∏v frontkamera hvis bakkamera ikke viser det)',
                'Pek en fjernkontroll mot kameraet',
                'Trykk p√• en knapp mens du ser p√• skjermen',
                'Du ser et bl√•lig/hvitt lys fra fjernkontrollen!',
                'Pr√∏v √• se med √∏ynene - kan du se det? (Nei!)'
              ].map((step, i) => (
                <div key={i} style={{
                  display: 'flex', gap: '10px', padding: '10px', background: 'rgba(0,0,0,0.2)', borderRadius: '6px'
                }}>
                  <span style={{
                    background: color, color: 'white', minWidth: '22px', height: '22px',
                    borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '12px'
                  }}>{i + 1}</span>
                  <span style={{ fontSize: '14px' }}>{step}</span>
                </div>
              ))}
            </div>
            
            <div style={{ background: 'rgba(245,158,11,0.2)', borderRadius: '8px', padding: '12px' }}>
              <strong>üí° Forklaring:</strong> Fjernkontrollen sender infrar√∏d (~950 nm), 
              som er utenfor synlig lys. Kamerasensoren kan fange det opp!
            </div>
          </div>
        </div>
      </ContentCard>

      <ContentCard color="rgba(139,92,246,0.1)">
        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '16px' }}>
          <span style={{ fontSize: '48px' }}>üß™</span>
          <div style={{ flex: 1 }}>
            <h3 style={{ color: '#8b5cf6', marginBottom: '12px' }}>üî¨ Fors√∏k 2: Hva stopper infrar√∏d?</h3>
            <p style={{ marginBottom: '16px' }}>
              N√• skal du teste hva som blokkerer IR-signalet! Hold ulike materialer 
              mellom fjernkontrollen og TV-en (eller mobilkameraet).
            </p>
            
            <div style={{
              background: 'rgba(0,0,0,0.2)',
              borderRadius: '12px',
              padding: '16px',
              marginBottom: '16px'
            }}>
              <h4 style={{ marginBottom: '12px' }}>üìã Fremgangsm√•te:</h4>
              <ol style={{ margin: 0, paddingLeft: '20px', lineHeight: '1.8' }}>
                <li>Sjekk f√∏rst at fjernkontrollen virker p√• TV-en</li>
                <li>Hold et materiale mellom fjernkontroll og TV</li>
                <li>Trykk p√• en knapp - reagerer TV-en?</li>
                <li>Registrer resultatet under</li>
                <li>Gjenta med alle materialene</li>
              </ol>
            </div>
            
            <h4 style={{ marginBottom: '12px' }}>üìä Registrer resultatene:</h4>
            <div style={{ display: 'grid', gap: '8px', marginBottom: '16px' }}>
              {materials.map((mat) => (
                <div key={mat.id} style={{
                  display: 'flex',
                  alignItems: 'center',
                  gap: '12px',
                  padding: '10px 12px',
                  background: results[mat.id] 
                    ? results[mat.id] === 'through' 
                      ? 'rgba(16,185,129,0.2)' 
                      : results[mat.id] === 'weak'
                        ? 'rgba(245,158,11,0.2)'
                        : 'rgba(239,68,68,0.2)'
                    : 'rgba(255,255,255,0.05)',
                  borderRadius: '8px'
                }}>
                  <span style={{ fontSize: '20px', width: '30px' }}>{mat.icon}</span>
                  <span style={{ flex: 1, fontSize: '14px' }}>{mat.name}</span>
                  <div style={{ display: 'flex', gap: '6px' }}>
                    {[
                      { id: 'through', label: '‚úÖ G√•r gjennom', color: '#10b981' },
                      { id: 'weak', label: '‚ö†Ô∏è Svakt', color: '#f59e0b' },
                      { id: 'blocked', label: '‚ùå Stoppes', color: '#ef4444' }
                    ].map((opt) => (
                      <button
                        key={opt.id}
                        onClick={() => setResults({ ...results, [mat.id]: opt.id })}
                        style={{
                          padding: '4px 10px',
                          borderRadius: '4px',
                          border: results[mat.id] === opt.id ? `2px solid ${opt.color}` : '2px solid transparent',
                          background: results[mat.id] === opt.id ? `${opt.color}33` : 'rgba(255,255,255,0.1)',
                          color: 'white',
                          cursor: 'pointer',
                          fontSize: '11px'
                        }}
                      >
                        {opt.label}
                      </button>
                    ))}
                  </div>
                </div>
              ))}
            </div>
            
            {Object.keys(results).length >= 5 && (
              <div style={{
                background: 'rgba(16,185,129,0.2)',
                borderRadius: '8px',
                padding: '16px',
                marginBottom: '16px'
              }}>
                <strong>üéØ Analyse av resultatene:</strong>
                <p style={{ margin: '8px 0 0', fontSize: '14px' }}>
                  Materialer som stoppet IR: {materials.filter(m => results[m.id] === 'blocked').map(m => m.name).join(', ') || 'Ingen'}
                </p>
                <p style={{ margin: '4px 0 0', fontSize: '14px' }}>
                  Materialer som slapp gjennom: {materials.filter(m => results[m.id] === 'through').map(m => m.name).join(', ') || 'Ingen'}
                </p>
              </div>
            )}
          </div>
        </div>
      </ContentCard>

      <ContentCard color="rgba(16,185,129,0.1)">
        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '16px' }}>
          <span style={{ fontSize: '48px' }}>üì∂</span>
          <div style={{ flex: 1 }}>
            <h3 style={{ color: '#10b981', marginBottom: '12px' }}>üî¨ Fors√∏k 3: Sammenlign med WiFi/Bluetooth</h3>
            <p style={{ marginBottom: '16px' }}>
              N√• skal du sammenligne! G√• bak de samme materialene med mobilen og sjekk om 
              WiFi og Bluetooth fortsatt fungerer.
            </p>
            
            <div style={{
              background: 'rgba(0,0,0,0.2)',
              borderRadius: '12px',
              padding: '16px',
              marginBottom: '16px'
            }}>
              <h4 style={{ marginBottom: '12px' }}>üìã Fremgangsm√•te:</h4>
              <ol style={{ margin: 0, paddingLeft: '20px', lineHeight: '1.8' }}>
                <li>Koble til Bluetooth-hodetelefoner eller h√∏yttaler</li>
                <li>Legg mobilen bak/under samme materialer som f√∏r</li>
                <li>Spill musikk - fungerer Bluetooth fortsatt?</li>
                <li>Sjekk WiFi-signalstyrken med mobilen bak materialet</li>
              </ol>
            </div>
            
            <div style={{
              background: 'rgba(59,130,246,0.2)',
              borderRadius: '8px',
              padding: '16px'
            }}>
              <strong>ü§î Refleksjonssp√∏rsm√•l:</strong>
              <p style={{ margin: '8px 0 4px', fontSize: '14px' }}>
                ‚Ä¢ Hvilke materialer stoppet IR men <em>ikke</em> WiFi/Bluetooth?
              </p>
              <p style={{ margin: '4px 0', fontSize: '14px' }}>
                ‚Ä¢ Hvorfor er det slik? (Hint: b√∏lgelengde!)
              </p>
              <p style={{ margin: '4px 0 0', fontSize: '14px' }}>
                ‚Ä¢ IR: ~950 nm | WiFi/Bluetooth: ~12 cm - hvor mye st√∏rre er WiFi?
              </p>
            </div>
          </div>
        </div>
      </ContentCard>

      <DiscussionBox
        color={color}
        question="Basert p√• fors√∏kene: Hvorfor bruker vi radiob√∏lger til WiFi og Bluetooth, men infrar√∏d til fjernkontroller?"
        helpText="Tenk p√• gjennomtrenging, rekkevidde, str√∏mforbruk og om man trenger √• n√• enheter i andre rom..."
      />
    </>
  );
}


// ===== FLASHCARDS =====
function FlashcardsSection({ color, markComplete }) {
  const [currentCard, setCurrentCard] = useState(0);
  const [isFlipped, setIsFlipped] = useState(false);
  const [known, setKnown] = useState([]);
  
  useEffect(() => { if (known.length >= 8) markComplete(); }, [known]);
  
  const cards = [
    // Grunnleggende b√∏lger
    { front: 'Hva er en b√∏lge?', back: 'En forstyrrelse som transporterer energi fra ett sted til et annet, uten at materie flyttes permanent.' },
    { front: 'Hva er en tverrb√∏lge?', back: 'En b√∏lge der partiklene svinger vinkelrett (90¬∞) p√• b√∏lgens bevegelsesretning. Eksempel: lys, radiob√∏lger, b√∏lger p√• tau.' },
    { front: 'Hva er en langsg√•ende b√∏lge?', back: 'En b√∏lge der partiklene svinger parallelt med b√∏lgens bevegelsesretning. Eksempel: lydb√∏lger i luft.' },
    { front: 'Hva er kompresjon og fortynning?', back: 'Kompresjon = omr√•de der partikler er presset sammen (h√∏yt trykk). Fortynning = omr√•de der partikler er spredt (lavt trykk). Brukes om lydb√∏lger.' },
    
    // B√∏lgeegenskaper
    { front: 'B√∏lgelengde (Œª)', back: 'Avstanden mellom to identiske punkter p√• b√∏lgen (f.eks. topp til topp). M√•les i meter (m) eller nanometer (nm).' },
    { front: 'Frekvens (f)', back: 'Antall svingninger per sekund. M√•les i Hertz (Hz). 1 Hz = 1 svingning per sekund.' },
    { front: 'Amplitude', back: 'St√∏rst avstand fra hvilestillingen (midtlinjen). Beskriver b√∏lgens styrke/intensitet.' },
    { front: 'B√∏lgeformelen', back: 'v = f √ó Œª (hastighet = frekvens √ó b√∏lgelengde)' },
    { front: 'Lysets hastighet (c)', back: 'c = 3 √ó 10‚Å∏ m/s = 300 000 km/s. Alle EM-b√∏lger har denne hastigheten i vakuum.' },
    
    // EM-spekteret
    { front: 'Hva er det elektromagnetiske spekteret?', back: 'Hele omr√•det av EM-str√•ling ordnet etter b√∏lgelengde/frekvens: radiob√∏lger ‚Üí mikrob√∏lger ‚Üí infrar√∏d ‚Üí synlig lys ‚Üí UV ‚Üí r√∏ntgen ‚Üí gamma.' },
    { front: 'Hvilke EM-b√∏lger har lengst b√∏lgelengde?', back: 'Radiob√∏lger (kan v√¶re flere kilometer lange).' },
    { front: 'Hvilke EM-b√∏lger har kortest b√∏lgelengde?', back: 'Gammastr√•ling (kortere enn 0,01 nm).' },
    
    // Teknologi
    { front: 'WiFi-frekvens og b√∏lgelengde', back: '2,4 GHz (~12 cm) eller 5 GHz (~6 cm). Ligger i mikrob√∏lge/radiob√∏lge-omr√•det.' },
    { front: 'Hvorfor g√•r WiFi gjennom vegger?', back: 'B√∏lgelengden (~12 cm) er mye st√∏rre enn strukturene i veggen, s√• b√∏lgen "ser" veggen som delvis gjennomsiktig. Men signalet svekkes.' },
    { front: 'Hvorfor g√•r ikke infrar√∏d (fjernkontroll) gjennom vegger?', back: 'B√∏lgelengden (~950 nm) er s√• kort at den absorberes eller reflekteres av de fleste faste materialer.' },
    
    // Str√•ling og helse
    { front: 'Hva er ioniserende str√•ling?', back: 'Str√•ling med nok energi til √• sl√• l√∏s elektroner fra atomer. Kan skade DNA. Inkluderer: UV, r√∏ntgen, gammastr√•ling.' },
    { front: 'Hva er ikke-ioniserende str√•ling?', back: 'Str√•ling som IKKE kan ionisere atomer. Trygt ved normal bruk. Inkluderer: radiob√∏lger, mikrob√∏lger, infrar√∏d, synlig lys.' },
    { front: 'Er WiFi og 4G/5G farlig?', back: 'Nei - de bruker ikke-ioniserende str√•ling. Ingen vitenskapelig dokumentasjon for helsefare ved normal bruk.' },
    
    // Lyd
    { front: 'Hvordan dannes lyd?', back: '1) Lydkilde vibrerer ‚Üí 2) Luftmolekyler presses sammen/fra hverandre ‚Üí 3) Trykkb√∏lgen forplanter seg ‚Üí 4) Trommehinnen vibrerer ‚Üí hjernen tolker som lyd.' },
    { front: 'Lydens hastighet i luft', back: 'Ca. 343 m/s (ved 20¬∞C). Mye saktere enn lys!' },
    { front: 'Kan lyd bevege seg i vakuum?', back: 'Nei! Lyd er langsg√•ende b√∏lger som trenger et medium (luft, vann, etc.) √• bevege seg gjennom. Derfor ingen lyd i verdensrommet.' }
  ];

  const next = (isKnown) => {
    if (isKnown && !known.includes(currentCard)) setKnown([...known, currentCard]);
    setIsFlipped(false);
    setTimeout(() => setCurrentCard((currentCard + 1) % cards.length), 150);
  };
  
  const goToCard = (index) => {
    setIsFlipped(false);
    setCurrentCard(index);
  };

  return (
    <ContentCard>
      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>
        <h2 style={{ margin: 0, color: color }}>üÉè Flashcards ({cards.length} kort)</h2>
        <span style={{ color: '#10b981' }}>‚úì {known.length}/{cards.length} kan</span>
      </div>
      
      {/* Kort-nummer */}
      <p style={{ textAlign: 'center', fontSize: '14px', opacity: 0.6, marginBottom: '12px' }}>
        Kort {currentCard + 1} av {cards.length}
      </p>
      
      {/* Flashcard */}
      <div
        onClick={() => setIsFlipped(!isFlipped)}
        style={{
          background: isFlipped ? 'rgba(16,185,129,0.2)' : `${color}22`,
          borderRadius: '16px',
          padding: '40px 24px',
          minHeight: '180px',
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
          justifyContent: 'center',
          cursor: 'pointer',
          border: isFlipped ? '2px solid #10b981' : `2px solid ${color}`,
          marginBottom: '20px',
          textAlign: 'center'
        }}
      >
        <p style={{ fontSize: '12px', opacity: 0.6, marginBottom: '12px' }}>
          {isFlipped ? '‚úì SVAR' : '‚ùì SP√òRSM√ÖL'} ‚Ä¢ Klikk for √• snu
        </p>
        <p style={{ fontSize: '18px', fontWeight: isFlipped ? '400' : '600', lineHeight: '1.6' }}>
          {isFlipped ? cards[currentCard].back : cards[currentCard].front}
        </p>
      </div>
      
      {/* Navigasjonsknapper */}
      <div style={{ display: 'flex', gap: '12px', justifyContent: 'center', marginBottom: '20px' }}>
        <button 
          onClick={() => goToCard((currentCard - 1 + cards.length) % cards.length)}
          style={{ padding: '10px 16px', borderRadius: '8px', border: 'none', background: 'rgba(255,255,255,0.1)', color: 'white', cursor: 'pointer' }}
        >
          ‚Üê Forrige
        </button>
        <button onClick={() => next(false)} style={{ padding: '10px 24px', borderRadius: '8px', border: 'none', background: 'rgba(239,68,68,0.2)', color: '#ef4444', cursor: 'pointer', fontWeight: '500' }}>
          √òv mer
        </button>
        <button onClick={() => next(true)} style={{ padding: '10px 24px', borderRadius: '8px', border: 'none', background: 'rgba(16,185,129,0.2)', color: '#10b981', cursor: 'pointer', fontWeight: '500' }}>
          Kan dette ‚úì
        </button>
        <button 
          onClick={() => goToCard((currentCard + 1) % cards.length)}
          style={{ padding: '10px 16px', borderRadius: '8px', border: 'none', background: 'rgba(255,255,255,0.1)', color: 'white', cursor: 'pointer' }}
        >
          Neste ‚Üí
        </button>
      </div>
      
      {/* Kort-oversikt */}
      <div style={{ 
        display: 'flex', 
        gap: '4px', 
        justifyContent: 'center', 
        flexWrap: 'wrap',
        padding: '12px',
        background: 'rgba(0,0,0,0.2)',
        borderRadius: '8px'
      }}>
        {cards.map((_, i) => (
          <div
            key={i}
            onClick={() => goToCard(i)}
            style={{
              width: '20px',
              height: '20px',
              borderRadius: '4px',
              background: known.includes(i) 
                ? '#10b981' 
                : i === currentCard 
                  ? color 
                  : 'rgba(255,255,255,0.2)',
              cursor: 'pointer',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              fontSize: '10px',
              color: 'white'
            }}
            title={`Kort ${i + 1}`}
          >
            {known.includes(i) ? '‚úì' : i + 1}
          </div>
        ))}
      </div>
      
      {/* Fremgang */}
      {known.length > 0 && (
        <div style={{ marginTop: '16px', textAlign: 'center' }}>
          <div style={{
            height: '8px',
            background: 'rgba(255,255,255,0.1)',
            borderRadius: '4px',
            overflow: 'hidden'
          }}>
            <div style={{
              height: '100%',
              width: `${(known.length / cards.length) * 100}%`,
              background: '#10b981',
              transition: 'width 0.3s ease'
            }} />
          </div>
          <p style={{ fontSize: '13px', opacity: 0.7, marginTop: '8px' }}>
            {known.length === cards.length 
              ? 'üéâ Gratulerer! Du kan alle kortene!' 
              : `${Math.round((known.length / cards.length) * 100)}% fullf√∏rt`}
          </p>
        </div>
      )}
    </ContentCard>
  );
}


// ===== HJEMMEOPPGAVE =====
function HomeworkSection({ color, answers, setAnswers, studentName }) {
  // Hent lagrede svar fra localStorage ved oppstart
  const [local, setLocal] = useState(() => {
    try {
      const saved = localStorage.getItem('tradlos_homework_okt1');
      return saved ? JSON.parse(saved) : (answers.okt1 || {});
    } catch {
      return answers.okt1 || {};
    }
  });
  const [saved, setSaved] = useState(false);
  
  // Lagre til localStorage hver gang local endres
  useEffect(() => {
    try {
      localStorage.setItem('tradlos_homework_okt1', JSON.stringify(local));
    } catch (e) {
      console.log('Kunne ikke lagre lokalt');
    }
  }, [local]);
  
  const tasks = [
    { 
      id: 'sammendrag', 
      title: 'üìù Sammendrag', 
      desc: 'Skriv et sammendrag av det du l√¶rte i dag med dine egne ord. Skriv s√• mye eller lite du vil - det viktigste er at du forklarer det med egne ord!',
      placeholder: 'I dag l√¶rte jeg om b√∏lger...\n\nEn b√∏lge er...\n\nDet finnes to typer b√∏lger:\n- Tverrb√∏lger er...\n- Langsg√•ende b√∏lger er...\n\nLyd dannes ved at...\n\nEM-spekteret inneholder...\n\nWiFi g√•r gjennom vegger fordi...\n\n(Skriv s√• mye du vil!)',
      minHeight: '250px'
    },
    { 
      id: 't1', 
      title: 'üî¨ Materiale-fors√∏k hjemme', 
      desc: 'Gj√∏r fors√∏kene hjemme med flere materialer! Test hva som stopper infrar√∏d (fjernkontroll) og sammenlign med WiFi/Bluetooth.',
      placeholder: 'Materialer jeg testet:\n\n1. [materiale]: IR gikk/stoppet, WiFi/BT gikk/stoppet\n2. ...\n\nKonklusjon: ...',
      minHeight: '120px'
    },
    { 
      id: 't2', 
      title: 'üßÆ WiFi-beregning', 
      desc: '5 GHz WiFi - beregn b√∏lgelengden. Vis hele utregningen med formel!',
      placeholder: 'Gitt:\nf = 5 GHz = 5 √ó 10‚Åπ Hz\nc = 3 √ó 10‚Å∏ m/s\n\nFormel: Œª = c / f\n\nUtregning:\nŒª = ...',
      minHeight: '120px'
    },
    { 
      id: 't3', 
      title: 'üì∂ WiFi-kartlegging', 
      desc: 'M√•l WiFi-signalstyrken p√• 4+ steder hjemme. Bruk innstillinger eller en WiFi-app. Forklar resultatene!',
      placeholder: 'Sted 1 (ved ruter): ... dBm\nSted 2 (naborom): ... dBm\nSted 3 (bak betongvegg): ... dBm\nSted 4: ... dBm\n\nForklaring: ...',
      minHeight: '120px'
    }
  ];
  
  const handleSave = () => {
    setAnswers({ ...answers, okt1: local });
    setSaved(true);
    setTimeout(() => setSaved(false), 3000);
  };
  
  // Eksporter svar som tekstfil
  const exportAnswers = () => {
    const date = new Date().toLocaleDateString('no-NO');
    let content = `HJEMMEOPPGAVE - √òKT 1: B√òLGER OG EM-STR√ÖLING\n`;
    content += `Navn: ${studentName || 'Ikke oppgitt'}\n`;
    content += `Dato: ${date}\n`;
    content += `${'='.repeat(50)}\n\n`;
    
    tasks.forEach((task, i) => {
      content += `${task.title}\n`;
      content += `${'-'.repeat(40)}\n`;
      content += `${local[task.id] || '(Ikke besvart)'}\n\n`;
    });
    
    // Lag og last ned fil
    const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `hjemmeoppgave_okt1_${studentName || 'elev'}_${date.replace(/\./g, '-')}.txt`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  };
  
  // Kopier til utklippstavle
  const copyToClipboard = () => {
    const date = new Date().toLocaleDateString('no-NO');
    let content = `HJEMMEOPPGAVE - √òKT 1\nNavn: ${studentName || ''}\n\n`;
    
    tasks.forEach((task) => {
      content += `${task.title}\n${local[task.id] || '(Ikke besvart)'}\n\n`;
    });
    
    navigator.clipboard.writeText(content).then(() => {
      alert('Kopiert til utklippstavle! Du kan n√• lime inn i Word, Teams, epost osv.');
    });
  };

  return (
    <ContentCard>
      <h2 style={{ color: color, marginBottom: '8px' }}>üìù Hjemmeoppgave</h2>
      <p style={{ opacity: 0.7, marginBottom: '20px' }}>
        Gj√∏r disse oppgavene f√∏r neste √∏kt. Svarene lagres automatisk i nettleseren.
      </p>
      
      {saved && (
        <div style={{ background: 'rgba(16,185,129,0.2)', borderRadius: '8px', padding: '12px', marginBottom: '16px' }}>
          ‚úÖ Svarene er lagret!
        </div>
      )}
      
      <div style={{ display: 'grid', gap: '16px' }}>
        {tasks.map((task) => (
          <div key={task.id} style={{ 
            background: 'rgba(0,0,0,0.2)', 
            borderRadius: '12px', 
            padding: '16px'
          }}>
            <h4 style={{ color: color, marginBottom: '8px' }}>
              {task.title}
            </h4>
            <p style={{ marginBottom: '12px', fontSize: '14px', opacity: 0.9 }}>{task.desc}</p>
            <textarea
              value={local[task.id] || ''}
              onChange={(e) => setLocal({ ...local, [task.id]: e.target.value })}
              placeholder={task.placeholder}
              style={{
                width: '100%', padding: '12px', borderRadius: '8px',
                border: '1px solid rgba(255,255,255,0.2)',
                background: 'rgba(255,255,255,0.05)', color: 'white',
                fontSize: '14px', minHeight: task.minHeight || '100px', resize: 'vertical', boxSizing: 'border-box',
                fontFamily: 'inherit',
                lineHeight: '1.6'
              }}
            />
            {local[task.id] && (
              <p style={{ fontSize: '12px', opacity: 0.5, marginTop: '4px' }}>
                {local[task.id].length} tegn
              </p>
            )}
          </div>
        ))}
      </div>
      
      {/* Knapper */}
      <div style={{ 
        marginTop: '24px', 
        padding: '20px', 
        background: 'rgba(0,0,0,0.3)', 
        borderRadius: '12px',
        display: 'grid',
        gap: '12px'
      }}>
        <p style={{ fontSize: '14px', opacity: 0.8, marginBottom: '8px' }}>
          <strong>üíæ Levere inn / ta vare p√• svarene:</strong>
        </p>
        
        <div style={{ display: 'flex', gap: '12px', flexWrap: 'wrap' }}>
          <button
            onClick={exportAnswers}
            style={{
              padding: '12px 20px', borderRadius: '8px',
              border: 'none', background: '#10b981', color: 'white', 
              cursor: 'pointer', fontWeight: '600',
              display: 'flex', alignItems: 'center', gap: '8px'
            }}
          >
            üì• Last ned som fil
          </button>
          
          <button
            onClick={copyToClipboard}
            style={{
              padding: '12px 20px', borderRadius: '8px',
              border: 'none', background: '#3b82f6', color: 'white', 
              cursor: 'pointer', fontWeight: '600',
              display: 'flex', alignItems: 'center', gap: '8px'
            }}
          >
            üìã Kopier til utklippstavle
          </button>
        </div>
        
        <p style={{ fontSize: '13px', opacity: 0.6, marginTop: '8px' }}>
          Last ned filen eller kopier teksten og lim inn i Teams/Word/epost for √• levere.
        </p>
      </div>
    </ContentCard>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<TradlosKommunikasjonApp />);
    </script>
</body>
</html>
